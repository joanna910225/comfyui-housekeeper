import { app as re } from "../../../scripts/app.js";
import { ComponentWidgetImpl as se, addWidget as oe } from "../../../scripts/domWidget.js";
import { defineComponent as U2, ref as a2, resolveDirective as ae, createElementBlock as P2, openBlock as E2, Fragment as L0, createElementVNode as w2, withDirectives as le, createVNode as j2, createBlock as A0, unref as i2, normalizeClass as M0, withCtx as n0, createTextVNode as E0, toDisplayString as O2, renderList as ne, normalizeStyle as ce, onMounted as _0, nextTick as pe } from "vue";
import c0 from "primevue/button";
import { useI18n as H0 } from "vue-i18n";
const he = { class: "toolbar" }, ue = { class: "color-picker" }, fe = { class: "size-slider" }, ge = ["value"], Ce = /* @__PURE__ */ U2({
  __name: "ToolBar",
  props: {
    colors: {},
    initialColor: {},
    initialBrushSize: {},
    initialTool: {}
  },
  emits: ["tool-change", "color-change", "canvas-clear", "brush-size-change"],
  setup(A, { emit: _ }) {
    const { t: H } = H0(), D = A, m = _, r2 = D.colors || ["#000000", "#ff0000", "#0000ff", "#69a869", "#ffff00", "#ff00ff", "#00ffff"], K = a2(D.initialColor || "#000000"), I = a2(D.initialBrushSize || 5), R = a2(D.initialTool || "pen");
    function F(b) {
      R.value = b, m("tool-change", b);
    }
    function X(b) {
      K.value = b, m("color-change", b);
    }
    function Y() {
      m("canvas-clear");
    }
    function z(b) {
      const k = b.target;
      I.value = Number(k.value), m("brush-size-change", I.value);
    }
    return (b, k) => {
      const g2 = ae("tooltip");
      return E2(), P2(L0, null, [
        w2("div", he, [
          le((E2(), A0(i2(c0), {
            class: M0({ active: R.value === "pen" }),
            onClick: k[0] || (k[0] = (q) => F("pen"))
          }, {
            default: n0(() => [
              E0(O2(i2(H)("vue-basic.pen")), 1)
            ]),
            _: 1
          }, 8, ["class"])), [
            [g2, { value: i2(H)("vue-basic.pen-tooltip"), showDelay: 300 }]
          ]),
          j2(i2(c0), { onClick: Y }, {
            default: n0(() => [
              E0(O2(i2(H)("vue-basic.clear-canvas")), 1)
            ]),
            _: 1
          })
        ]),
        w2("div", ue, [
          (E2(!0), P2(L0, null, ne(i2(r2), (q, j) => (E2(), A0(i2(c0), {
            key: j,
            class: M0({ "color-button": !0, active: K.value === q }),
            onClick: (v2) => X(q),
            type: "button",
            title: q
          }, {
            default: n0(() => [
              w2("i", {
                class: "pi pi-circle-fill",
                style: ce({ color: q })
              }, null, 4)
            ]),
            _: 2
          }, 1032, ["class", "onClick", "title"]))), 128))
        ]),
        w2("div", fe, [
          w2("label", null, O2(i2(H)("vue-basic.brush-size")) + ": " + O2(I.value) + "px", 1),
          w2("input", {
            type: "range",
            min: "1",
            max: "50",
            value: I.value,
            onChange: k[1] || (k[1] = (q) => z(q))
          }, null, 40, ge)
        ])
      ], 64);
    };
  }
}), p0 = (A, _) => {
  const H = A.__vccOpts || A;
  for (const [D, m] of _)
    H[D] = m;
  return H;
}, de = /* @__PURE__ */ p0(Ce, [["__scopeId", "data-v-cae98791"]]), me = { class: "drawing-board" }, we = { class: "canvas-container" }, ve = ["width", "height"], be = /* @__PURE__ */ U2({
  __name: "DrawingBoard",
  props: {
    width: {},
    height: {},
    initialColor: {},
    initialBrushSize: {}
  },
  emits: ["mounted", "drawing-start", "drawing", "drawing-end", "state-save", "canvas-clear"],
  setup(A, { expose: _, emit: H }) {
    const D = A, m = D.width || 800, r2 = D.height || 500, K = D.initialColor || "#000000", I = D.initialBrushSize || 5, R = H, F = a2(!1), X = a2(0), Y = a2(0), z = a2(null), b = a2(!1), k = a2(I), g2 = a2(K), q = a2(null), j = a2(null);
    _0(() => {
      j.value && (z.value = j.value.getContext("2d"), v2(), pe(() => {
        j.value && R("mounted", j.value);
      }));
    });
    function v2() {
      z.value && (z.value.fillStyle = "#ffffff", z.value.fillRect(0, 0, m, r2), d2(), L2());
    }
    function d2() {
      z.value && (b.value ? (z.value.globalCompositeOperation = "destination-out", z.value.strokeStyle = "rgba(0,0,0,1)") : (z.value.globalCompositeOperation = "source-over", z.value.strokeStyle = g2.value), z.value.lineWidth = k.value, z.value.lineJoin = "round", z.value.lineCap = "round");
    }
    function b2(T) {
      F.value = !0;
      const { offsetX: s2, offsetY: J } = l2(T);
      X.value = s2, Y.value = J, z.value && (z.value.beginPath(), z.value.moveTo(X.value, Y.value), z.value.arc(X.value, Y.value, k.value / 2, 0, Math.PI * 2), z.value.fill(), R("drawing-start", {
        x: s2,
        y: J,
        tool: b.value ? "eraser" : "pen"
      }));
    }
    function S2(T) {
      if (!F.value || !z.value) return;
      const { offsetX: s2, offsetY: J } = l2(T);
      z.value.beginPath(), z.value.moveTo(X.value, Y.value), z.value.lineTo(s2, J), z.value.stroke(), X.value = s2, Y.value = J, R("drawing", {
        x: s2,
        y: J,
        tool: b.value ? "eraser" : "pen"
      });
    }
    function V() {
      F.value && (F.value = !1, L2(), R("drawing-end"));
    }
    function l2(T) {
      let s2 = 0, J = 0;
      if ("touches" in T) {
        if (T.preventDefault(), j.value) {
          const _2 = j.value.getBoundingClientRect();
          s2 = T.touches[0].clientX - _2.left, J = T.touches[0].clientY - _2.top;
        }
      } else
        s2 = T.offsetX, J = T.offsetY;
      return { offsetX: s2, offsetY: J };
    }
    function y2(T) {
      T.preventDefault();
      const J = {
        touches: [T.touches[0]]
      };
      b2(J);
    }
    function Z2(T) {
      if (T.preventDefault(), !F.value) return;
      const J = {
        touches: [T.touches[0]]
      };
      S2(J);
    }
    function K2(T) {
      b.value = T === "eraser", d2();
    }
    function q2(T) {
      g2.value = T, d2();
    }
    function J2(T) {
      k.value = T, d2();
    }
    function k2() {
      z.value && (z.value.fillStyle = "#ffffff", z.value.fillRect(0, 0, m, r2), d2(), L2(), R("canvas-clear"));
    }
    function L2() {
      j.value && (q.value = j.value.toDataURL("image/png"), q.value && R("state-save", q.value));
    }
    async function Q2() {
      if (!j.value)
        throw new Error("Canvas is unable to get current data");
      return q.value ? q.value : j.value.toDataURL("image/png");
    }
    return _({
      setTool: K2,
      setColor: q2,
      setBrushSize: J2,
      clearCanvas: k2,
      getCurrentCanvasData: Q2
    }), (T, s2) => (E2(), P2("div", me, [
      w2("div", we, [
        w2("canvas", {
          ref_key: "canvas",
          ref: j,
          width: i2(m),
          height: i2(r2),
          onMousedown: b2,
          onMousemove: S2,
          onMouseup: V,
          onMouseleave: V,
          onTouchstart: y2,
          onTouchmove: Z2,
          onTouchend: V
        }, null, 40, ve)
      ])
    ]));
  }
}), ye = /* @__PURE__ */ p0(be, [["__scopeId", "data-v-ca1239fc"]]), xe = { class: "drawing-app" }, ze = /* @__PURE__ */ U2({
  __name: "DrawingApp",
  props: {
    width: {},
    height: {},
    initialColor: {},
    initialBrushSize: {},
    availableColors: {}
  },
  emits: ["tool-change", "color-change", "brush-size-change", "drawing-start", "drawing", "drawing-end", "state-save", "mounted"],
  setup(A, { expose: _, emit: H }) {
    const D = A, m = D.width || 800, r2 = D.height || 500, K = D.initialColor || "#000000", I = D.initialBrushSize || 5, R = D.availableColors || ["#000000", "#ff0000", "#0000ff", "#00ff00", "#ffff00", "#ff00ff", "#00ffff"], F = H, X = a2(null), Y = a2(null);
    function z(V) {
      var l2;
      (l2 = X.value) == null || l2.setTool(V), F("tool-change", V);
    }
    function b(V) {
      var l2;
      (l2 = X.value) == null || l2.setColor(V), F("color-change", V);
    }
    function k(V) {
      var l2;
      (l2 = X.value) == null || l2.setBrushSize(V), F("brush-size-change", V);
    }
    function g2() {
      var V;
      (V = X.value) == null || V.clearCanvas();
    }
    function q(V) {
      F("drawing-start", V);
    }
    function j(V) {
      F("drawing", V);
    }
    function v2() {
      F("drawing-end");
    }
    function d2(V) {
      Y.value = V, F("state-save", V);
    }
    function b2(V) {
      F("mounted", V);
    }
    async function S2() {
      if (Y.value)
        return Y.value;
      if (X.value)
        try {
          return await X.value.getCurrentCanvasData();
        } catch (V) {
          throw console.error("unable to get canvas data:", V), new Error("unable to get canvas data");
        }
      throw new Error("get canvas data failed");
    }
    return _({
      getCanvasData: S2
    }), (V, l2) => (E2(), P2("div", xe, [
      j2(de, {
        colors: i2(R),
        initialColor: i2(K),
        initialBrushSize: i2(I),
        onToolChange: z,
        onColorChange: b,
        onBrushSizeChange: k,
        onCanvasClear: g2
      }, null, 8, ["colors", "initialColor", "initialBrushSize"]),
      j2(ye, {
        ref_key: "drawingBoard",
        ref: X,
        width: i2(m),
        height: i2(r2),
        initialColor: i2(K),
        initialBrushSize: i2(I),
        onDrawingStart: q,
        onDrawing: j,
        onDrawingEnd: v2,
        onStateSave: d2,
        onMounted: b2
      }, null, 8, ["width", "height", "initialColor", "initialBrushSize"])
    ]));
  }
}), ke = /* @__PURE__ */ p0(ze, [["__scopeId", "data-v-39bbf58b"]]), Le = /* @__PURE__ */ U2({
  __name: "VueExampleComponent",
  props: {
    widget: {}
  },
  setup(A) {
    const { t: _ } = H0(), H = a2(null), D = a2(null);
    A.widget.node;
    function m(K) {
      D.value = K, console.log("canvas state saved:", K.substring(0, 50) + "...");
    }
    async function r2(K, I) {
      var R;
      try {
        if (!((R = window.app) != null && R.api))
          throw new Error("ComfyUI API not available");
        const F = await fetch(K).then((k) => k.blob()), X = `${I}_${Date.now()}.png`, Y = new File([F], X), z = new FormData();
        return z.append("image", Y), z.append("subfolder", "threed"), z.append("type", "temp"), console.log("Vue Component: Using window.app.api.fetchApi"), (await window.app.api.fetchApi("/upload/image", {
          method: "POST",
          body: z
        })).json();
      } catch (F) {
        throw console.error("Vue Component: Error uploading image:", F), F;
      }
    }
    return _0(() => {
      A.widget.serializeValue = async (K, I) => {
        try {
          console.log("Vue Component: inside vue serializeValue"), console.log("node", K), console.log("index", I);
          const R = D.value;
          return R ? {
            image: `threed/${(await r2(R, "test_vue_basic")).name} [temp]`
          } : (console.warn("Vue Component: No canvas data available"), { image: null });
        } catch (R) {
          return console.error("Vue Component: Error in serializeValue:", R), { image: null };
        }
      };
    }), (K, I) => (E2(), P2("div", null, [
      w2("h1", null, O2(i2(_)("vue-basic.title")), 1),
      w2("div", null, [
        j2(ke, {
          ref_key: "drawingAppRef",
          ref: H,
          width: 300,
          height: 300,
          onStateSave: m
        }, null, 512)
      ])
    ]));
  }
}), S0 = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20filter='url(%23filter0_g_41_638)'%3e%3cpath%20d='M16.4923%2029.9976C19.8936%2030.0574%2022.3055%2028.99%2023.666%2028.0934C25.0266%2027.1967%2026.2635%2026.9576%2027.2529%2026.7783C28.2424%2026.5989%2028.2424%2025.6425%2028.2424%2025.224C28.2424%2024.8056%2028.0569%2023.4905%2025.0266%2020.0234C22.8326%2017.5132%2020.8447%2016.511%2019.9061%2016.2546C19.7676%2016.2168%2019.6745%2016.0821%2019.7076%2015.9467L20.3977%2013.1248C20.4273%2013.0034%2020.5485%2012.9245%2020.676%2012.9435L21.1332%2013.0115C21.2094%2013.0228%2021.2758%2013.0678%2021.3128%2013.1333L21.5254%2013.51C21.583%2013.6123%2021.7086%2013.6594%2021.8226%2013.6217L23.6641%2013.0128C23.8198%2012.9613%2023.8811%2012.7798%2023.7867%2012.6494L23.6614%2012.4765C23.5926%2012.3814%2023.605%2012.2529%2023.685%2012.1665C24.1611%2011.6518%2024.788%2010.6656%2024.1608%209.32325C23.4913%207.89039%2021.9206%207.7568%2021.1462%208.03732C21.0952%208.05577%2021.04%208.06127%2020.9871%208.049L19.7745%207.76771C19.6373%207.73587%2019.5004%207.82128%2019.4738%207.95525L19.0045%2010.3247C18.9821%2010.4373%2018.8802%2010.5188%2018.7615%2010.5188L13.4809%2010.5188C13.3622%2010.5188%2013.2603%2010.4373%2013.238%2010.3246L12.7686%207.95522C12.742%207.82125%2012.6051%207.73585%2012.4679%207.76768L11.2553%208.04897C11.2024%208.06124%2011.1472%208.05574%2011.0962%208.03729C10.3218%207.75678%208.75109%207.89037%208.08163%209.32322C7.45447%2010.6655%208.08134%2011.6517%208.55745%2012.1664C8.63745%2012.2529%208.64987%2012.3814%208.58104%2012.4764L8.45577%2012.6494C8.36136%2012.7798%208.42258%2012.9613%208.57835%2013.0128L10.4198%2013.6217C10.5338%2013.6594%2010.6594%2013.6122%2010.7171%2013.51L10.9296%2013.1333C10.9666%2013.0678%2011.033%2013.0228%2011.1092%2013.0114L11.5664%2012.9434C11.6939%2012.9245%2011.8151%2013.0034%2011.8448%2013.1248L12.5348%2015.9467C12.5679%2016.0821%2012.4748%2016.2167%2012.3363%2016.2546C11.3977%2016.511%209.40978%2017.5132%207.21583%2020.0234C4.18553%2023.4905%204%2024.8056%204%2025.224C4%2025.6425%204%2026.5989%204.98949%2026.7782C5.97897%2026.9576%207.21583%2027.1967%208.57638%2028.0933C9.93692%2028.99%2012.3488%2030.0573%2015.7501%2029.9976L16.4923%2029.9976Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M11.5489%208.89827C11.6709%209.6838%2011.7976%2010.844%2012.2357%2012.5711C12.5129%2013.6637%2012.7815%2014.3615%2012.9786%2014.867C13.1818%2015.3883%2013.2764%2015.637%2013.2764%2015.8988V16.2574H18.966V15.8988C18.966%2015.637%2019.0607%2015.3883%2019.2638%2014.867C19.4609%2014.3615%2019.7295%2013.6637%2020.0067%2012.5711C20.4448%2010.8441%2020.5715%209.6838%2020.6935%208.89827L19.9596%208.79179C19.8342%209.59904%2019.7135%2010.7142%2019.2858%2012.4003C19.0189%2013.4526%2018.7619%2014.12%2018.5693%2014.6141C18.4367%2014.9544%2018.3183%2015.2477%2018.2608%2015.5401H13.9816C13.9241%2015.2477%2013.8057%2014.9544%2013.6731%2014.6141C13.4805%2014.12%2013.2235%2013.4526%2012.9566%2012.4003C12.5289%2010.7142%2012.4082%209.59904%2012.2828%208.79179L11.5489%208.89827Z'%20fill='white'/%3e%3cpath%20d='M13.1194%2016.7655H19.2321C19.2934%2016.7655%2019.3521%2016.7856%2019.3988%2016.8239C20.5865%2017.799%2022.5426%2019.9034%2022.8636%2022.0079C23.2257%2024.3825%2021.7502%2025.2291%2020.5713%2025.8607C19.6282%2026.366%2017.6897%2026.8082%2016.6418%2026.8082H15.7151C14.6115%2026.8082%2012.7287%2026.366%2011.7856%2025.8607C10.6067%2025.2291%209.13122%2024.3825%209.49335%2022.0079C9.81466%2019.901%2011.775%2017.7941%2012.9622%2016.8205C13.0063%2016.7844%2013.0616%2016.7655%2013.1194%2016.7655Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M13.1056%2017.3293C13.2104%2017.2446%2013.3665%2017.2581%2013.4541%2017.3593C13.5418%2017.4606%2013.5279%2017.6115%2013.4231%2017.6962C12.9377%2018.0885%2012.2944%2018.7359%2011.7393%2019.5099C11.1829%2020.2859%2010.7283%2021.1712%2010.5964%2022.0409C10.4519%2022.9939%2010.7052%2023.6151%2011.0933%2024.0643C11.494%2024.528%2012.0505%2024.825%2012.5604%2025.0998C12.935%2025.3017%2013.5132%2025.4985%2014.1226%2025.6451C14.7311%2025.7914%2015.3458%2025.8816%2015.7883%2025.8816H16.5778C16.9962%2025.8816%2017.6108%2025.7916%2018.2263%2025.6449C18.8426%2025.4981%2019.432%2025.3012%2019.8057%2025.0998C20.3157%2024.825%2020.8721%2024.528%2021.2728%2024.0643C21.661%2023.6151%2021.9142%2022.9939%2021.7697%2022.0409C21.6405%2021.1886%2021.2023%2020.3213%2020.6615%2019.5564C20.1219%2018.7933%2019.492%2018.149%2019.0022%2017.7445C18.8984%2017.6587%2018.8862%2017.5078%2018.9749%2017.4074C19.0637%2017.3071%2019.2198%2017.2952%2019.3236%2017.3809C19.8458%2017.8122%2020.5051%2018.4878%2021.0699%2019.2866C21.6334%2020.0835%2022.115%2021.02%2022.2592%2021.9715C22.4233%2023.0539%2022.1345%2023.8131%2021.6525%2024.3709C21.183%2024.9143%2020.5411%2025.2509%2020.0466%2025.5175C19.6167%2025.7491%2018.9783%2025.9583%2018.3447%2026.1093C17.7101%2026.2604%2017.0523%2026.3598%2016.5778%2026.3598H15.7883C15.2905%2026.3598%2014.6327%2026.2606%2014.0031%2026.1092C13.3743%2025.9579%2012.7486%2025.7487%2012.3196%2025.5175C11.8251%2025.2509%2011.1831%2024.9143%2010.7136%2024.3709C10.2316%2023.8131%209.94279%2023.0539%2010.1069%2021.9715C10.2541%2021.0006%2010.7535%2020.0451%2011.3326%2019.2375C11.913%2018.4281%2012.5865%2017.749%2013.1056%2017.3293Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.4923%2029.9976C19.8936%2030.0574%2022.3055%2028.99%2023.666%2028.0934C25.0266%2027.1967%2026.2635%2026.9576%2027.2529%2026.7783C28.2424%2026.5989%2028.2424%2025.6425%2028.2424%2025.224C28.2424%2024.8056%2028.0569%2023.4905%2025.0266%2020.0234C22.8326%2017.5132%2020.8447%2016.511%2019.9061%2016.2546C19.7676%2016.2168%2019.6745%2016.0821%2019.7076%2015.9467L20.3977%2013.1248C20.4273%2013.0034%2020.5485%2012.9245%2020.676%2012.9435L21.1332%2013.0115C21.2094%2013.0228%2021.2758%2013.0678%2021.3128%2013.1333L21.5254%2013.51C21.583%2013.6123%2021.7086%2013.6594%2021.8226%2013.6217L23.6641%2013.0128C23.8198%2012.9613%2023.8811%2012.7798%2023.7867%2012.6494L23.6614%2012.4765C23.5926%2012.3814%2023.605%2012.2529%2023.685%2012.1665C24.1611%2011.6518%2024.788%2010.6656%2024.1608%209.32325C23.4913%207.89039%2021.9206%207.7568%2021.1462%208.03732C21.0952%208.05577%2021.04%208.06127%2020.9871%208.049L19.7745%207.76771C19.6373%207.73587%2019.5004%207.82128%2019.4738%207.95525L19.0045%2010.3247C18.9821%2010.4373%2018.8802%2010.5188%2018.7615%2010.5188L13.4809%2010.5188C13.3622%2010.5188%2013.2603%2010.4373%2013.238%2010.3246L12.7686%207.95522C12.742%207.82125%2012.6051%207.73585%2012.4679%207.76768L11.2553%208.04897C11.2024%208.06124%2011.1472%208.05574%2011.0962%208.03729C10.3218%207.75678%208.75109%207.89037%208.08163%209.32322C7.45447%2010.6655%208.08134%2011.6517%208.55745%2012.1664C8.63745%2012.2529%208.64987%2012.3814%208.58104%2012.4764L8.45577%2012.6494C8.36136%2012.7798%208.42258%2012.9613%208.57835%2013.0128L10.4198%2013.6217C10.5338%2013.6594%2010.6594%2013.6122%2010.7171%2013.51L10.9296%2013.1333C10.9666%2013.0678%2011.033%2013.0228%2011.1092%2013.0114L11.5664%2012.9434C11.6939%2012.9245%2011.8151%2013.0034%2011.8448%2013.1248L12.5348%2015.9467C12.5679%2016.0821%2012.4748%2016.2167%2012.3363%2016.2546C11.3977%2016.511%209.40978%2017.5132%207.21583%2020.0234C4.18553%2023.4905%204%2024.8056%204%2025.224C4%2025.6425%204%2026.5989%204.98949%2026.7782C5.97897%2026.9576%207.21583%2027.1967%208.57638%2028.0933C9.93692%2028.99%2012.3488%2030.0573%2015.7501%2029.9976L16.4923%2029.9976Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M10.6911%208.40132C10.3946%208.31279%2010.0502%208.26312%209.71798%208.35962C9.18732%208.51375%208.67177%208.87323%208.37262%209.52894C7.82258%2010.7346%208.76992%2011.7914%209.18459%2012.2306C9.18641%2012.2325%209.1871%2012.2344%209.1872%2012.2355C9.18724%2012.236%209.18707%2012.2364%209.18707%2012.2364L8.78104%2012.805L9.27578%2012.941L10.5102%2013.3283L10.6626%2012.9832L9.44896%2012.5698L9.51575%2012.4522L9.71613%2012.1582C9.71613%2012.1582%209.58948%2012.0545%209.51575%2011.9819C8.85368%2011.3295%208.40008%2010.4513%208.66725%209.74574C8.82677%209.32448%209.26838%208.92263%209.73592%208.68746L9.73893%208.68658C10.1614%208.56389%2010.3338%208.51381%2010.6626%208.51108C10.7244%208.51056%2010.7502%208.41894%2010.6911%208.40132Z'%20fill='white'/%3e%3cpath%20d='M4.72061%2025.2726C4.72061%2024.8058%204.85666%2024.2159%205.18544%2023.6472C5.54515%2023.0251%206.2959%2022.1754%206.2959%2022.1754C6.2959%2022.1754%206.04088%2022.8119%205.81119%2023.2475C5.58151%2023.6832%205.5473%2023.8071%205.43915%2024.2005C5.24268%2024.9153%205.32649%2025.094%205.32649%2025.2726C5.32649%2025.5414%205.56884%2025.7491%205.56884%2025.7491C5.56884%2025.7491%205.8795%2026.0732%206.30347%2026.1535C7.18073%2026.3197%208.31143%2026.5468%209.55225%2027.4014C10.7135%2028.2013%2013.1528%2029.1439%2016.1212%2029.1439V29.5624C13.0704%2029.6184%2010.5066%2028.6407%209.27405%2027.7917C8.12103%2026.9976%207.07547%2026.785%206.21176%2026.6214C5.76527%2026.5368%205.39175%2026.4127%205.12864%2026.1969C4.84994%2025.9684%204.72061%2025.659%204.72061%2025.2726Z'%20fill='white'/%3e%3cpath%20d='M11.2478%2012.3619C11.4347%2012.3619%2011.5834%2012.2302%2011.6223%2012.1926C11.6465%2012.4183%2011.6097%2012.4886%2011.5398%2012.5312C11.4471%2012.5876%2011.272%2012.6441%2011.0968%2012.5876C10.9567%2012.5425%2010.8391%2012.3619%2010.7807%2012.3054C10.8586%2012.3243%2011.061%2012.3619%2011.2478%2012.3619Z'%20fill='white'/%3e%3cpath%20d='M21.5298%208.40132C21.8263%208.31279%2022.1707%208.26312%2022.5029%208.35962C23.0336%208.51375%2023.5492%208.87323%2023.8483%209.52894C24.3983%2010.7346%2023.451%2011.7914%2023.0363%2012.2306C23.0345%2012.2325%2023.0338%2012.2344%2023.0337%2012.2355C23.0337%2012.236%2023.0339%2012.2364%2023.0339%2012.2364L23.4399%2012.805L22.9451%2012.941L21.7107%2013.3283L21.5583%2012.9832L22.772%2012.5698L22.7052%2012.4522L22.5048%2012.1582C22.5048%2012.1582%2022.6314%2012.0545%2022.7052%2011.9819C23.3672%2011.3295%2023.8208%2010.4513%2023.5537%209.74574C23.3942%209.32448%2022.9525%208.92263%2022.485%208.68746L22.482%208.68658C22.0596%208.56389%2021.8871%208.51381%2021.5583%208.51108C21.4965%208.51056%2021.4708%208.41894%2021.5298%208.40132Z'%20fill='white'/%3e%3cpath%20d='M27.5003%2025.2726C27.5003%2024.8058%2027.3643%2024.2159%2027.0355%2023.6472C26.6758%2023.0251%2025.925%2022.1754%2025.925%2022.1754C25.925%2022.1754%2026.18%2022.8119%2026.4097%2023.2475C26.6394%2023.6832%2026.6736%2023.8071%2026.7818%2024.2005C26.9782%2024.9153%2026.8944%2025.094%2026.8944%2025.2726C26.8944%2025.5414%2026.6521%2025.7491%2026.6521%2025.7491C26.6521%2025.7491%2026.3414%2026.0732%2025.9175%2026.1535C25.0402%2026.3197%2023.9095%2026.5468%2022.6687%2027.4014C21.5074%2028.2013%2019.0897%2029.1439%2016.1212%2029.1439V29.5624C19.1721%2029.6184%2021.7143%2028.6407%2022.9469%2027.7917C24.0999%2026.9976%2025.1455%2026.785%2026.0092%2026.6214C26.4557%2026.5368%2026.8292%2026.4127%2027.0923%2026.1969C27.371%2025.9684%2027.5003%2025.659%2027.5003%2025.2726Z'%20fill='white'/%3e%3cpath%20d='M20.9731%2012.3619C20.7862%2012.3619%2020.6375%2012.2302%2020.5986%2012.1926C20.5744%2012.4183%2020.6113%2012.4886%2020.6811%2012.5312C20.7738%2012.5876%2020.9489%2012.6441%2021.1241%2012.5876C21.2642%2012.5425%2021.3818%2012.3619%2021.4402%2012.3054C21.3623%2012.3243%2021.1599%2012.3619%2020.9731%2012.3619Z'%20fill='white'/%3e%3cpath%20d='M11.5489%208.89827C11.6709%209.6838%2011.7976%2010.844%2012.2357%2012.5711C12.5129%2013.6637%2012.7815%2014.3615%2012.9786%2014.867C13.1818%2015.3883%2013.2764%2015.637%2013.2764%2015.8988V16.2574H18.966V15.8988C18.966%2015.637%2019.0607%2015.3883%2019.2638%2014.867C19.4609%2014.3615%2019.7295%2013.6637%2020.0067%2012.5711C20.4448%2010.8441%2020.5715%209.6838%2020.6935%208.89827L19.9596%208.79179C19.8342%209.59904%2019.7135%2010.7142%2019.2858%2012.4003C19.0189%2013.4526%2018.7619%2014.12%2018.5693%2014.6141C18.4367%2014.9544%2018.3183%2015.2477%2018.2608%2015.5401H13.9816C13.9241%2015.2477%2013.8057%2014.9544%2013.6731%2014.6141C13.4805%2014.12%2013.2235%2013.4526%2012.9566%2012.4003C12.5289%2010.7142%2012.4082%209.59904%2012.2828%208.79179L11.5489%208.89827Z'%20fill='white'/%3e%3cpath%20d='M13.1194%2016.7655H19.2321C19.2934%2016.7655%2019.3521%2016.7856%2019.3988%2016.8239C20.5865%2017.799%2022.5426%2019.9034%2022.8636%2022.0079C23.2257%2024.3825%2021.7502%2025.2291%2020.5713%2025.8607C19.6282%2026.366%2017.6897%2026.8082%2016.6418%2026.8082H15.7151C14.6115%2026.8082%2012.7287%2026.366%2011.7856%2025.8607C10.6067%2025.2291%209.13122%2024.3825%209.49335%2022.0079C9.81466%2019.901%2011.775%2017.7941%2012.9622%2016.8205C13.0063%2016.7844%2013.0616%2016.7655%2013.1194%2016.7655Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M13.1056%2017.3293C13.2104%2017.2446%2013.3665%2017.2581%2013.4541%2017.3593C13.5418%2017.4606%2013.5279%2017.6115%2013.4231%2017.6962C12.9377%2018.0885%2012.2944%2018.7359%2011.7393%2019.5099C11.1829%2020.2859%2010.7283%2021.1712%2010.5964%2022.0409C10.4519%2022.9939%2010.7052%2023.6151%2011.0933%2024.0643C11.494%2024.528%2012.0505%2024.825%2012.5604%2025.0998C12.935%2025.3017%2013.5132%2025.4985%2014.1226%2025.6451C14.7311%2025.7914%2015.3458%2025.8816%2015.7883%2025.8816H16.5778C16.9962%2025.8816%2017.6108%2025.7916%2018.2263%2025.6449C18.8426%2025.4981%2019.432%2025.3012%2019.8057%2025.0998C20.3157%2024.825%2020.8721%2024.528%2021.2728%2024.0643C21.661%2023.6151%2021.9142%2022.9939%2021.7697%2022.0409C21.6405%2021.1886%2021.2023%2020.3213%2020.6615%2019.5564C20.1219%2018.7933%2019.492%2018.149%2019.0022%2017.7445C18.8984%2017.6587%2018.8862%2017.5078%2018.9749%2017.4074C19.0637%2017.3071%2019.2198%2017.2952%2019.3236%2017.3809C19.8458%2017.8122%2020.5051%2018.4878%2021.0699%2019.2866C21.6334%2020.0835%2022.115%2021.02%2022.2592%2021.9715C22.4233%2023.0539%2022.1345%2023.8131%2021.6525%2024.3709C21.183%2024.9143%2020.5411%2025.2509%2020.0466%2025.5175C19.6167%2025.7491%2018.9783%2025.9583%2018.3447%2026.1093C17.7101%2026.2604%2017.0523%2026.3598%2016.5778%2026.3598H15.7883C15.2905%2026.3598%2014.6327%2026.2606%2014.0031%2026.1092C13.3743%2025.9579%2012.7486%2025.7487%2012.3196%2025.5175C11.8251%2025.2509%2011.1831%2024.9143%2010.7136%2024.3709C10.2316%2023.8131%209.94279%2023.0539%2010.1069%2021.9715C10.2541%2021.0006%2010.7535%2020.0451%2011.3326%2019.2375C11.913%2018.4281%2012.5865%2017.749%2013.1056%2017.3293Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.6711%203.25992C16.6711%203.25992%2017.6803%202.19932%2019.1802%202.38558C20.6802%202.57183%2019.9223%205.46703%2019.9223%205.46703C19.9223%205.46703%2019.3139%206.64234%2016.6711%204.23447V3.25992ZM15.5714%203.26819C15.5714%203.26819%2014.5622%202.20759%2013.0622%202.39385C11.6954%202.56377%2012.0784%204.98485%2012.2881%205.41139C12.3085%205.45242%2012.9283%206.65061%2015.5714%204.24274V3.26819Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M16.6711%203.25992C16.6711%203.25992%2017.6803%202.19932%2019.1802%202.38558C20.6793%202.57179%2019.9231%205.464%2019.9223%205.46703L19.9149%205.47963C19.8384%205.59989%2019.1488%206.49191%2016.6711%204.23447V3.25992ZM13.0622%202.39385C14.5622%202.20759%2015.5714%203.26819%2015.5714%203.26819V4.24274C13.0932%206.50035%2012.3937%205.58789%2012.2992%205.43142L12.2881%205.41139C12.0801%204.98814%2011.7014%202.60142%2013.0305%202.39819L13.0622%202.39385ZM19.1172%202.85994C18.5046%202.78387%2017.9857%202.96074%2017.6078%203.16852C17.4195%203.27208%2017.2714%203.38076%2017.1717%203.46227C17.1697%203.4639%2017.1677%203.46556%2017.1658%203.46717V4.0256C18.3677%205.08788%2019.0188%205.27145%2019.2953%205.27555C19.3896%205.27695%2019.4418%205.25771%2019.4676%205.24403C19.4678%205.24309%2019.4681%205.24217%2019.4683%205.24123C19.4847%205.1678%2019.507%205.06134%2019.5293%204.93265C19.5744%204.67289%2019.618%204.33303%2019.6189%203.99489C19.6198%203.64776%2019.5751%203.349%2019.4785%203.14342C19.3935%202.96271%2019.2872%202.88106%2019.1172%202.85994ZM14.6347%203.17681C14.2686%202.97551%2013.7702%202.80323%2013.1824%202.86181L13.1253%202.86811C12.9613%202.8885%2012.8532%202.96538%2012.7642%203.11516C12.6638%203.28409%2012.5995%203.53455%2012.5775%203.8395C12.5561%204.13778%2012.5778%204.45054%2012.6179%204.71432C12.6378%204.84537%2012.6615%204.95983%2012.6849%205.04987C12.6966%205.09482%2012.7077%205.13161%2012.7173%205.15997C12.7221%205.17403%2012.7262%205.1851%2012.7295%205.19336C12.7299%205.1943%2012.7302%205.1952%2012.7306%205.19604C12.7478%205.2151%2012.8086%205.26607%2012.95%205.26714C13.2249%205.26922%2013.8742%205.09578%2015.0766%204.03389V3.47534C15.0747%203.47374%2015.0727%203.47207%2015.0707%203.47044C14.971%203.38894%2014.8229%203.28036%2014.6347%203.17681ZM15.2074%203.59221L15.2082%203.59291C15.2084%203.59315%2015.2086%203.5935%2015.2086%203.5935C15.2084%203.59328%2015.2081%203.5929%2015.2074%203.59221Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M15.8162%203.16618H16.4365C16.6233%203.16618%2016.7166%203.25643%2016.7166%203.43694V4.09096C16.7166%204.27147%2016.6233%204.36173%2016.4365%204.36173H15.8162C15.6295%204.36173%2015.5361%204.27147%2015.5361%204.09096V3.43694C15.5361%203.25643%2015.6295%203.16618%2015.8162%203.16618Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M16.4366%204.12635L16.4365%204.36173H15.8162L15.8162%204.12635H16.4366ZM16.4732%204.09098V3.43693C16.4732%203.42195%2016.4718%203.41121%2016.4705%203.40389C16.463%203.40268%2016.4519%203.40155%2016.4366%203.40155H15.8162C15.8008%203.40155%2015.7897%203.40279%2015.7822%203.404C15.7809%203.41132%2015.7796%203.42203%2015.7796%203.43693V4.09098C15.7796%204.10579%2015.7809%204.11647%2015.7822%204.12378C15.7897%204.12499%2015.8008%204.12635%2015.8162%204.12635L15.8162%204.36173L15.7823%204.36067C15.6291%204.35079%2015.5474%204.27182%2015.5372%204.12378L15.5361%204.09096V3.43694C15.5361%203.25643%2015.6295%203.16618%2015.8162%203.16618H16.4365L16.4704%203.16723C16.6346%203.17779%2016.7166%203.26771%2016.7166%203.43694V4.09096L16.7156%204.12378C16.7054%204.27185%2016.6236%204.35082%2016.4704%204.36067L16.4365%204.36173L16.4366%204.12635C16.4519%204.12635%2016.463%204.1251%2016.4705%204.1239C16.4718%204.11658%2016.4732%204.10588%2016.4732%204.09098Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.1875%204.4215C17.6985%204.42151%2018.7854%205.24416%2019.0748%206.01354C19.1215%206.13765%2019.0553%206.27489%2018.9269%206.32002C18.7985%206.36515%2018.6565%206.3011%2018.6098%206.177C18.4045%205.6313%2017.5314%204.89973%2016.1875%204.89972C15.5262%204.89972%2014.9027%205.10801%2014.4138%205.38285C13.9145%205.66351%2013.5954%205.99016%2013.5024%206.19241C13.4469%206.31305%2013.3008%206.36734%2013.176%206.31372C13.0511%206.26007%2012.995%206.11879%2013.0505%205.99813C13.2048%205.66241%2013.6276%205.27169%2014.1651%204.96954C14.713%204.66155%2015.4215%204.4215%2016.1875%204.4215Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.6711%203.25992C16.6711%203.25992%2017.6803%202.19932%2019.1802%202.38558C20.6802%202.57183%2019.9223%205.46703%2019.9223%205.46703C19.9223%205.46703%2019.3139%206.64234%2016.6711%204.23447V3.25992ZM15.5714%203.26819C15.5714%203.26819%2014.5622%202.20759%2013.0622%202.39385C11.6954%202.56377%2012.0784%204.98485%2012.2881%205.41139C12.3085%205.45242%2012.9283%206.65061%2015.5714%204.24274V3.26819Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M16.6711%203.25992C16.6711%203.25992%2017.6803%202.19932%2019.1802%202.38558C20.6793%202.57179%2019.9231%205.464%2019.9223%205.46703L19.9149%205.47963C19.8384%205.59989%2019.1488%206.49191%2016.6711%204.23447V3.25992ZM13.0622%202.39385C14.5622%202.20759%2015.5714%203.26819%2015.5714%203.26819V4.24274C13.0932%206.50035%2012.3937%205.58789%2012.2992%205.43142L12.2881%205.41139C12.0801%204.98814%2011.7014%202.60142%2013.0305%202.39819L13.0622%202.39385ZM19.1172%202.85994C18.5046%202.78387%2017.9857%202.96074%2017.6078%203.16852C17.4195%203.27208%2017.2714%203.38076%2017.1717%203.46227C17.1697%203.4639%2017.1677%203.46556%2017.1658%203.46717V4.0256C18.3677%205.08788%2019.0188%205.27145%2019.2953%205.27555C19.3896%205.27695%2019.4418%205.25771%2019.4676%205.24403C19.4678%205.24309%2019.4681%205.24217%2019.4683%205.24123C19.4847%205.1678%2019.507%205.06134%2019.5293%204.93265C19.5744%204.67289%2019.618%204.33303%2019.6189%203.99489C19.6198%203.64776%2019.5751%203.349%2019.4785%203.14342C19.3935%202.96271%2019.2872%202.88106%2019.1172%202.85994ZM14.6347%203.17681C14.2686%202.97551%2013.7702%202.80323%2013.1824%202.86181L13.1253%202.86811C12.9613%202.8885%2012.8532%202.96538%2012.7642%203.11516C12.6638%203.28409%2012.5995%203.53455%2012.5775%203.8395C12.5561%204.13778%2012.5778%204.45054%2012.6179%204.71432C12.6378%204.84537%2012.6615%204.95983%2012.6849%205.04987C12.6966%205.09482%2012.7077%205.13161%2012.7173%205.15997C12.7221%205.17403%2012.7262%205.1851%2012.7295%205.19336C12.7299%205.1943%2012.7302%205.1952%2012.7306%205.19604C12.7478%205.2151%2012.8086%205.26607%2012.95%205.26714C13.2249%205.26922%2013.8742%205.09578%2015.0766%204.03389V3.47534C15.0747%203.47374%2015.0727%203.47207%2015.0707%203.47044C14.971%203.38894%2014.8229%203.28036%2014.6347%203.17681ZM15.2074%203.59221L15.2082%203.59291C15.2084%203.59315%2015.2086%203.5935%2015.2086%203.5935C15.2084%203.59328%2015.2081%203.5929%2015.2074%203.59221Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M15.8162%203.16618H16.4365C16.6233%203.16618%2016.7166%203.25643%2016.7166%203.43694V4.09096C16.7166%204.27147%2016.6233%204.36173%2016.4365%204.36173H15.8162C15.6295%204.36173%2015.5361%204.27147%2015.5361%204.09096V3.43694C15.5361%203.25643%2015.6295%203.16618%2015.8162%203.16618Z'%20fill='%23FCFCFA'/%3e%3cpath%20d='M16.4366%204.12635L16.4365%204.36173H15.8162L15.8162%204.12635H16.4366ZM16.4732%204.09098V3.43693C16.4732%203.42195%2016.4718%203.41121%2016.4705%203.40389C16.463%203.40268%2016.4519%203.40155%2016.4366%203.40155H15.8162C15.8008%203.40155%2015.7897%203.40279%2015.7822%203.404C15.7809%203.41132%2015.7796%203.42203%2015.7796%203.43693V4.09098C15.7796%204.10579%2015.7809%204.11647%2015.7822%204.12378C15.7897%204.12499%2015.8008%204.12635%2015.8162%204.12635L15.8162%204.36173L15.7823%204.36067C15.6291%204.35079%2015.5474%204.27182%2015.5372%204.12378L15.5361%204.09096V3.43694C15.5361%203.25643%2015.6295%203.16618%2015.8162%203.16618H16.4365L16.4704%203.16723C16.6346%203.17779%2016.7166%203.26771%2016.7166%203.43694V4.09096L16.7156%204.12378C16.7054%204.27185%2016.6236%204.35082%2016.4704%204.36067L16.4365%204.36173L16.4366%204.12635C16.4519%204.12635%2016.463%204.1251%2016.4705%204.1239C16.4718%204.11658%2016.4732%204.10588%2016.4732%204.09098Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.1875%204.4215C17.6985%204.42151%2018.7854%205.24416%2019.0748%206.01354C19.1215%206.13765%2019.0553%206.27489%2018.9269%206.32002C18.7985%206.36515%2018.6565%206.3011%2018.6098%206.177C18.4045%205.6313%2017.5314%204.89973%2016.1875%204.89972C15.5262%204.89972%2014.9027%205.10801%2014.4138%205.38285C13.9145%205.66351%2013.5954%205.99016%2013.5024%206.19241C13.4469%206.31305%2013.3008%206.36734%2013.176%206.31372C13.0511%206.26007%2012.995%206.11879%2013.0505%205.99813C13.2048%205.66241%2013.6276%205.27169%2014.1651%204.96954C14.713%204.66155%2015.4215%204.4215%2016.1875%204.4215Z'%20fill='%238BC3F3'/%3e%3c/g%3e%3cdefs%3e%3cfilter%20id='filter0_g_41_638'%20x='3'%20y='1.36363'%20width='26.2424'%20height='29.6364'%20filterUnits='userSpaceOnUse'%20color-interpolation-filters='sRGB'%3e%3cfeFlood%20flood-opacity='0'%20result='BackgroundImageFix'/%3e%3cfeBlend%20mode='normal'%20in='SourceGraphic'%20in2='BackgroundImageFix'%20result='shape'/%3e%3cfeTurbulence%20type='fractalNoise'%20baseFrequency='1%201'%20numOctaves='3'%20seed='4891'%20/%3e%3cfeDisplacementMap%20in='shape'%20scale='2'%20xChannelSelector='R'%20yChannelSelector='G'%20result='displacedImage'%20width='100%25'%20height='100%25'%20/%3e%3cfeMerge%20result='effect1_texture_41_638'%3e%3cfeMergeNode%20in='displacedImage'/%3e%3c/feMerge%3e%3c/filter%3e%3c/defs%3e%3c/svg%3e", Ae = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.66667%206.89543H26C26.7072%206.89543%2027.3855%207.17638%2027.8856%207.67648C28.3857%208.17658%2028.6667%208.85486%2028.6667%209.5621V25.5621C28.6667%2026.2693%2028.3857%2026.9476%2027.8856%2027.4477C27.3855%2027.9478%2026.7072%2028.2288%2026%2028.2288H4.66667C3.95942%2028.2288%203.28115%2027.9478%202.78105%2027.4477C2.28095%2026.9476%202%2026.2693%202%2025.5621V9.5621C2%208.85486%202.28095%208.17658%202.78105%207.67648C3.28115%207.17638%203.95942%206.89543%204.66667%206.89543ZM4.66667%209.55999V25.5621H10V9.55999H4.66667ZM12.6667%209.5621V25.5621H26V9.5621H12.6667Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Me = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M9.73332%2028C9.73332%2028.3536%209.59284%2028.6928%209.34279%2028.9428C9.09274%2029.1929%208.75361%2029.3333%208.39998%2029.3333C8.04636%2029.3333%207.70722%2029.1929%207.45717%2028.9428C7.20713%2028.6928%207.06665%2028.3536%207.06665%2028V4C7.06665%203.64638%207.20713%203.30724%207.45717%203.05719C7.70722%202.80714%208.04636%202.66667%208.39998%202.66667C8.75361%202.66667%209.09274%202.80714%209.34279%203.05719C9.59284%203.30724%209.73332%203.64638%209.73332%204V28ZM15.0667%2012C14.3594%2012%2013.6811%2011.719%2013.181%2011.219C12.6809%2010.7189%2012.4%2010.0406%2012.4%209.33333C12.4%208.62609%2012.6809%207.94781%2013.181%207.44771C13.6811%206.94762%2014.3594%206.66667%2015.0667%206.66667H23.0667C23.7739%206.66667%2024.4522%206.94762%2024.9523%207.44771C25.4524%207.94781%2025.7333%208.62609%2025.7333%209.33333C25.7333%2010.0406%2025.4524%2010.7189%2024.9523%2011.219C24.4522%2011.719%2023.7739%2012%2023.0667%2012H15.0667ZM15.0667%2016H20.4C21.1072%2016%2021.7855%2016.281%2022.2856%2016.781C22.7857%2017.2811%2023.0667%2017.9594%2023.0667%2018.6667C23.0667%2019.3739%2022.7857%2020.0522%2022.2856%2020.5523C21.7855%2021.0524%2021.1072%2021.3333%2020.4%2021.3333H15.0667C14.3594%2021.3333%2013.6811%2021.0524%2013.181%2020.5523C12.6809%2020.0522%2012.4%2019.3739%2012.4%2018.6667C12.4%2017.9594%2012.6809%2017.2811%2013.181%2016.781C13.6811%2016.281%2014.3594%2016%2015.0667%2016Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Ee = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M22.6667%2028C22.6667%2028.3536%2022.5262%2028.6928%2022.2761%2028.9428C22.0261%2029.1929%2021.687%2029.3333%2021.3333%2029.3333C20.9797%2029.3333%2020.6406%2029.1929%2020.3905%2028.9428C20.1405%2028.6928%2020%2028.3536%2020%2028V4C20%203.64638%2020.1405%203.30724%2020.3905%203.05719C20.6406%202.80714%2020.9797%202.66667%2021.3333%202.66667C21.687%202.66667%2022.0261%202.80714%2022.2761%203.05719C22.5262%203.30724%2022.6667%203.64638%2022.6667%204V28ZM14.6667%206.66667C15.3739%206.66667%2016.0522%206.94762%2016.5523%207.44771C17.0524%207.94781%2017.3333%208.62609%2017.3333%209.33333C17.3333%2010.0406%2017.0524%2010.7189%2016.5523%2011.219C16.0522%2011.719%2015.3739%2012%2014.6667%2012H6.66667C5.95942%2012%205.28115%2011.719%204.78105%2011.219C4.28095%2010.7189%204%2010.0406%204%209.33333C4%208.62609%204.28095%207.94781%204.78105%207.44771C5.28115%206.94762%205.95942%206.66667%206.66667%206.66667H14.6667ZM14.6667%2016C15.3739%2016%2016.0522%2016.281%2016.5523%2016.781C17.0524%2017.2811%2017.3333%2017.9594%2017.3333%2018.6667C17.3333%2019.3739%2017.0524%2020.0522%2016.5523%2020.5523C16.0522%2021.0524%2015.3739%2021.3333%2014.6667%2021.3333H9.33333C8.62609%2021.3333%207.94781%2021.0524%207.44772%2020.5523C6.94762%2020.0522%206.66667%2019.3739%206.66667%2018.6667C6.66667%2017.9594%206.94762%2017.2811%207.44772%2016.781C7.94781%2016.281%208.62609%2016%209.33333%2016H14.6667Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Se = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.39992%204H25.5999C26.1893%204%2026.6666%204.59733%2026.6666%205.33333C26.6666%206.06933%2026.1893%206.66667%2025.5999%206.66667H6.39992C5.81059%206.66667%205.33325%206.06933%205.33325%205.33333C5.33325%204.59733%205.81059%204%206.39992%204ZM9.33325%2012C9.33325%2011.2928%209.6142%2010.6145%2010.1143%2010.1144C10.6144%209.61428%2011.2927%209.33333%2011.9999%209.33333C12.7072%209.33333%2013.3854%209.61428%2013.8855%2010.1144C14.3856%2010.6145%2014.6666%2011.2928%2014.6666%2012V25.3333C14.6666%2026.0406%2014.3856%2026.7189%2013.8855%2027.219C13.3854%2027.719%2012.7072%2028%2011.9999%2028C11.2927%2028%2010.6144%2027.719%2010.1143%2027.219C9.6142%2026.7189%209.33325%2026.0406%209.33325%2025.3333V12ZM17.3333%2012C17.3333%2011.2928%2017.6142%2010.6145%2018.1143%2010.1144C18.6144%209.61428%2019.2927%209.33333%2019.9999%209.33333C20.7072%209.33333%2021.3854%209.61428%2021.8855%2010.1144C22.3856%2010.6145%2022.6666%2011.2928%2022.6666%2012V20C22.6666%2020.7072%2022.3856%2021.3855%2021.8855%2021.8856C21.3854%2022.3857%2020.7072%2022.6667%2019.9999%2022.6667C19.2927%2022.6667%2018.6144%2022.3857%2018.1143%2021.8856C17.6142%2021.3855%2017.3333%2020.7072%2017.3333%2020V12Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", _e = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M6.39992%2025.3333H25.5999C26.1893%2025.3333%2026.6666%2025.9307%2026.6666%2026.6667C26.6666%2027.4027%2026.1893%2028%2025.5999%2028H6.39992C5.81059%2028%205.33325%2027.4027%205.33325%2026.6667C5.33325%2025.9307%205.81059%2025.3333%206.39992%2025.3333ZM14.6666%2020C14.6666%2020.7072%2014.3856%2021.3855%2013.8855%2021.8856C13.3854%2022.3857%2012.7072%2022.6667%2011.9999%2022.6667C11.2927%2022.6667%2010.6144%2022.3857%2010.1143%2021.8856C9.6142%2021.3855%209.33325%2020.7072%209.33325%2020V6.66667C9.33325%205.95942%209.6142%205.28115%2010.1143%204.78105C10.6144%204.28095%2011.2927%204%2011.9999%204C12.7072%204%2013.3854%204.28095%2013.8855%204.78105C14.3856%205.28115%2014.6666%205.95942%2014.6666%206.66667V20ZM22.6666%2020C22.6666%2020.7072%2022.3856%2021.3855%2021.8855%2021.8856C21.3854%2022.3857%2020.7072%2022.6667%2019.9999%2022.6667C19.2927%2022.6667%2018.6144%2022.3857%2018.1143%2021.8856C17.6142%2021.3855%2017.3333%2020.7072%2017.3333%2020V12C17.3333%2011.2928%2017.6142%2010.6145%2018.1143%2010.1144C18.6144%209.61428%2019.2927%209.33333%2019.9999%209.33333C20.7072%209.33333%2021.3854%209.61428%2021.8855%2010.1144C22.3856%2010.6145%2022.6666%2011.2928%2022.6666%2012V20Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", He = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M23.4668%2017.3333V20C23.4668%2020.7072%2023.1858%2021.3855%2022.6857%2021.8856C22.1857%2022.3857%2021.5074%2022.6667%2020.8001%2022.6667C20.0929%2022.6667%2019.4146%2022.3857%2018.9145%2021.8856C18.4144%2021.3855%2018.1335%2020.7072%2018.1335%2020V17.3333H15.4668V23.6187C15.4668%2025.3027%2014.2735%2026.6667%2012.8001%2026.6667C11.3268%2026.6667%2010.1335%2025.3027%2010.1335%2023.6187V17.3333H4.80013C4.44651%2017.3333%204.10737%2017.1929%203.85732%2016.9428C3.60727%2016.6928%203.4668%2016.3536%203.4668%2016C3.4668%2015.6464%203.60727%2015.3072%203.85732%2015.0572C4.10737%2014.8071%204.44651%2014.6667%204.80013%2014.6667H10.1335V8.38133C10.1335%206.69733%2011.3268%205.33333%2012.8001%205.33333C14.2735%205.33333%2015.4668%206.69733%2015.4668%208.38133V14.6667H18.1335V12C18.1335%2011.2928%2018.4144%2010.6145%2018.9145%2010.1144C19.4146%209.61428%2020.0929%209.33333%2020.8001%209.33333C21.5074%209.33333%2022.1857%209.61428%2022.6857%2010.1144C23.1858%2010.6145%2023.4668%2011.2928%2023.4668%2012V14.6667H28.8001C29.1538%2014.6667%2029.4929%2014.8071%2029.7429%2015.0572C29.993%2015.3072%2030.1335%2015.6464%2030.1335%2016C30.1335%2016.3536%2029.993%2016.6928%2029.7429%2016.9428C29.4929%2017.1929%2029.1538%2017.3333%2028.8001%2017.3333H23.4668Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Ve = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M14.8665%2017.3333V14.6667H8.5812C6.8972%2014.6667%205.5332%2013.4733%205.5332%2012C5.5332%2010.5267%206.8972%209.33333%208.5812%209.33333H14.8665V4C14.8665%203.64638%2015.007%203.30724%2015.2571%203.05719C15.5071%202.80714%2015.8462%202.66667%2016.1999%202.66667C16.5535%202.66667%2016.8926%202.80714%2017.1427%203.05719C17.3927%203.30724%2017.5332%203.64638%2017.5332%204V9.33333H23.8185C25.5025%209.33333%2026.8665%2010.5267%2026.8665%2012C26.8665%2013.4733%2025.5025%2014.6667%2023.8185%2014.6667H17.5332V17.3333H21.5332C22.2404%2017.3333%2022.9187%2017.6143%2023.4188%2018.1144C23.9189%2018.6145%2024.1999%2019.2928%2024.1999%2020C24.1999%2020.7072%2023.9189%2021.3855%2023.4188%2021.8856C22.9187%2022.3857%2022.2404%2022.6667%2021.5332%2022.6667H17.5332V28C17.5332%2028.3536%2017.3927%2028.6928%2017.1427%2028.9428C16.8926%2029.1929%2016.5535%2029.3333%2016.1999%2029.3333C15.8462%2029.3333%2015.5071%2029.1929%2015.2571%2028.9428C15.007%2028.6928%2014.8665%2028.3536%2014.8665%2028V22.6667H10.8665C10.1593%2022.6667%209.48102%2022.3857%208.98092%2021.8856C8.48082%2021.3855%208.19987%2020.7072%208.19987%2020C8.19987%2019.2928%208.48082%2018.6145%208.98092%2018.1144C9.48102%2017.6143%2010.1593%2017.3333%2010.8665%2017.3333H14.8665Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Be = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.80005%2024.7791V6.22093C3.80005%205.54663%204.41923%205%205.18303%205C5.94683%205%206.56601%205.54663%206.56601%206.22093V24.7791C6.56601%2025.4534%205.94683%2026%205.18303%2026C4.41923%2026%203.80005%2025.4534%203.80005%2024.7791Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M7.49597%2016.1488L10.3015%2018.9352C10.6394%2019.2708%2011.2681%2019.0598%2011.2681%2018.6107V17.6976H22.332V18.6107C22.332%2019.0598%2022.9607%2019.2708%2023.2986%2018.9352L26.1041%2016.1488C26.4767%2015.7787%2026.4767%2015.221%2026.1041%2014.851L23.2986%2012.0646C22.9607%2011.729%2022.332%2011.94%2022.332%2012.3891V13.3022H11.2681V12.3891C11.2681%2011.94%2010.6394%2011.729%2010.3015%2012.0646L7.49597%2014.851C7.12335%2015.221%207.12335%2015.7787%207.49597%2016.1488Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M27.0341%2024.7791V6.22093C27.0341%205.54663%2027.6533%205%2028.4171%205C29.1809%205%2029.8%205.54663%2029.8%206.22093V24.7791C29.8%2025.4534%2029.1809%2026%2028.4171%2026C27.6533%2026%2027.0341%2025.4534%2027.0341%2024.7791Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Fe = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3%2024.7791V6.22093C3%205.54663%203.61918%205%204.38298%205C5.14678%205%205.76596%205.54663%205.76596%206.22093V24.7791C5.76596%2025.4534%205.14678%2026%204.38298%2026C3.61918%2026%203%2025.4534%203%2024.7791Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M26.234%2024.7791V6.22093C26.234%205.54663%2026.8532%205%2027.617%205C28.3808%205%2029%205.54663%2029%206.22093V24.7791C29%2025.4534%2028.3808%2026%2027.617%2026C26.8532%2026%2026.234%2025.4534%2026.234%2024.7791Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M15.0141%2016.2491L12.2086%2019.0355C11.8706%2019.3711%2011.2419%2019.1601%2011.2419%2018.711V17.7979H6.71L6.71%2013.4025H11.2419V12.4894C11.2419%2012.0403%2011.8706%2011.8293%2012.2086%2012.1649L15.0141%2014.9513C15.3867%2015.3213%2015.3867%2015.879%2015.0141%2016.2491Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.9895%2016.2491L19.795%2019.0355C20.133%2019.3711%2020.7617%2019.1601%2020.7617%2018.711V17.7979H25.2936L25.2936%2013.4025H20.7617V12.4894C20.7617%2012.0403%2020.133%2011.8293%2019.795%2012.1649L16.9895%2014.9513C16.6169%2015.3213%2016.6169%2015.879%2016.9895%2016.2491Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Ne = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.22093%203H25.7791C26.4534%203%2027%203.61918%2027%204.38298C27%205.14678%2026.4534%205.76596%2025.7791%205.76596H7.22093C6.54663%205.76596%206%205.14678%206%204.38298C6%203.61918%206.54663%203%207.22093%203Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M15.8512%206.69592L13.0648%209.50143C12.7292%209.83937%2012.9402%2010.4681%2013.3893%2010.4681H14.3024V21.5319H13.3893C12.9402%2021.5319%2012.7292%2022.1606%2013.0648%2022.4986L15.8512%2025.3041C16.2213%2025.6767%2016.779%2025.6767%2017.149%2025.3041L19.9354%2022.4986C20.271%2022.1606%2020.06%2021.5319%2019.6109%2021.5319H18.6978V10.4681H19.6109C20.06%2010.4681%2020.271%209.83937%2019.9354%209.50143L17.149%206.69592C16.779%206.3233%2016.2213%206.3233%2015.8512%206.69592Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M7.22093%2026.234H25.7791C26.4534%2026.234%2027%2026.8532%2027%2027.617C27%2028.3808%2026.4534%2029%2025.7791%2029H7.22093C6.54663%2029%206%2028.3808%206%2027.617C6%2026.8532%206.54663%2026.234%207.22093%2026.234Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", De = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.82103%203H26.3792C27.0535%203%2027.6001%203.61918%2027.6001%204.38298C27.6001%205.14678%2027.0535%205.76596%2026.3792%205.76596H7.82103C7.14673%205.76596%206.6001%205.14678%206.6001%204.38298C6.6001%203.61918%207.14673%203%207.82103%203Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M7.82103%2026.234H26.3792C27.0535%2026.234%2027.6001%2026.8532%2027.6001%2027.617C27.6001%2028.3808%2027.0535%2029%2026.3792%2029H7.82103C7.14673%2029%206.6001%2028.3808%206.6001%2027.617C6.6001%2026.8532%207.14673%2026.234%207.82103%2026.234Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.351%2015.0141L13.5646%2012.2086C13.229%2011.8706%2013.44%2011.2419%2013.8891%2011.2419H14.8022V6.71L19.1976%206.71V11.2419H20.1107C20.5598%2011.2419%2020.7708%2011.8706%2020.4352%2012.2086L17.6488%2015.0141C17.2787%2015.3867%2016.7211%2015.3867%2016.351%2015.0141Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M16.351%2016.9895L13.5646%2019.795C13.229%2020.133%2013.44%2020.7617%2013.8891%2020.7617H14.8022V25.2936L19.1976%2025.2936V20.7617H20.1107C20.5598%2020.7617%2020.7708%2020.133%2020.4352%2019.795L17.6488%2016.9895C17.2787%2016.6169%2016.7211%2016.6169%2016.351%2016.9895Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Oe = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.5201%206.18689C19.2052%205.87191%2019.4282%205.33334%2019.8737%205.33334H25.6666C26.2189%205.33334%2026.6666%205.78105%2026.6666%206.33334V12.1262C26.6666%2012.5717%2026.128%2012.7948%2025.813%2012.4798L23.9999%2010.6667L18.6666%2016L15.9999%2013.3333L21.3333%208L19.5201%206.18689ZM12.4797%2025.8131C12.7947%2026.1281%2012.5716%2026.6667%2012.1261%2026.6667H6.33325C5.78097%2026.6667%205.33325%2026.219%205.33325%2025.6667V19.8738C5.33325%2019.4283%205.87182%2019.2052%206.18681%2019.5202L7.99992%2021.3333L13.3333%2016L15.9999%2018.6667L10.6666%2024L12.4797%2025.8131Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Pe = "data:image/svg+xml,%3csvg%20width='33'%20height='32'%20viewBox='0%200%2033%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M14.8666%2016H9.07372C8.62827%2016%208.40519%2016.5386%208.72017%2016.8535L10.5333%2018.6667L5.19995%2024L7.86662%2026.6667L13.2%2021.3333L15.0131%2023.1464C15.328%2023.4614%2015.8666%2023.2383%2015.8666%2022.7929V17C15.8666%2016.4477%2015.4189%2016%2014.8666%2016Z'%20fill='%238BC3F3'/%3e%3cpath%20d='M17.2%2015.6667H22.9929C23.4384%2015.6667%2023.6615%2015.1281%2023.3465%2014.8131L21.5334%2013L26.8667%207.66667L24.2%205L18.8667%2010.3333L17.0536%208.52022C16.7386%208.20524%2016.2%208.42832%2016.2%208.87377V14.6667C16.2%2015.219%2016.6477%2015.6667%2017.2%2015.6667Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Ze = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M15.9999%2016C15.9999%2016.1427%2015.9692%2016.288%2015.9039%2016.4213C15.8398%2016.5595%2015.7376%2016.6766%2015.6092%2016.7587L6.46256%2022.5587C6.09456%2022.7907%205.6319%2022.6387%205.42923%2022.22C5.36471%2022.089%205.33183%2021.9447%205.33323%2021.7987V10.2013C5.33323%209.72132%205.67323%209.33333%206.09323%209.33333C6.22441%209.33264%206.35289%209.37067%206.46256%209.44266L15.6092%2015.2413C15.7325%2015.3252%2015.8328%2015.4385%2015.901%2015.571C15.9692%2015.7035%2016.0032%2015.851%2015.9999%2016V10.2C15.9999%209.71999%2016.3399%209.33199%2016.7599%209.33199C16.8911%209.33131%2017.0196%209.36934%2017.1292%209.44133L26.2759%2015.24C26.6426%2015.472%2026.7746%2016%2026.5706%2016.42C26.5065%2016.5582%2026.4042%2016.6752%2026.2759%2016.7573L17.1292%2022.5573C16.7612%2022.7893%2016.2986%2022.6373%2016.0959%2022.2187C16.0314%2022.0877%2015.9985%2021.9433%2015.9999%2021.7973V16Z'%20fill='%238BC3F3'/%3e%3c/svg%3e", Te = "data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16%2016H21.8C21.9467%2016%2022.0934%2016.0333%2022.2214%2016.096C22.64%2016.2987%2022.792%2016.7627%2022.5587%2017.1293L16.76%2026.276C16.6814%2026.4%2016.564%2026.5027%2016.4227%2026.5707C16.004%2026.7747%2015.476%2026.6427%2015.2427%2026.276L9.4427%2017.1293C9.37118%2017.0195%209.33361%2016.891%209.33469%2016.76C9.33469%2016.34%209.7227%2016%2010.2027%2016H16ZM16%2016C15.6934%2016%2015.3987%2015.8587%2015.24%2015.6093L9.44003%206.46266C9.36898%206.3527%209.33188%206.22424%209.33336%206.09333C9.33336%205.67333%209.72136%205.33333%2010.2014%205.33333H21.7987C21.9454%205.33333%2022.092%205.36666%2022.22%205.42933C22.6387%205.63199%2022.7907%206.096%2022.5574%206.46266L16.7587%2015.6093C16.68%2015.7333%2016.5627%2015.836%2016.4214%2015.904C16.288%2015.9693%2016.1427%2016%2016.0014%2016'%20fill='%238BC3F3'/%3e%3c/svg%3e", V0 = re;
V0.registerExtension({
  name: "vue-basic",
  getCustomWidgets(A) {
    return {
      CUSTOM_VUE_COMPONENT_BASIC(_) {
        const H = {
          name: "custom_vue_component_basic",
          type: "vue-basic"
        }, D = new se({
          node: _,
          name: H.name,
          component: Le,
          inputSpec: H,
          options: {}
        });
        return oe(_, D), { widget: D };
      }
    };
  },
  nodeCreated(A) {
    if (A.constructor.comfyClass !== "vue-basic") return;
    const [_, H] = A.size;
    A.setSize([Math.max(_, 300), Math.max(H, 520)]);
  }
});
V0.registerExtension({
  name: "housekeeper-alignment",
  async setup() {
    try {
      Ie();
    } catch {
    }
  },
  nodeCreated(A) {
    A.constructor.comfyClass === "housekeeper-alignment" && (A.setSize([200, 100]), A.title && (A.title = " Alignment Panel Active"));
  }
});
function Ie() {
  let A = null, _ = null, H = null, D = !1, m = [], r2 = [], K = [], I = 0;
  const R = "housekeeper-recent-colors", F = 9, X = ["#353535", "#3f5159", "#593930", "#335533", "#333355", "#335555", "#553355", "#665533", "#000000"];
  let Y = O0(), z = null, b = null, k = null, g2 = !1;
  const q = /* @__PURE__ */ new WeakMap(), j = /* @__PURE__ */ new WeakMap();
  let v2 = null, d2 = !1;
  const b2 = 48, S2 = 24;
  function V() {
    const i = document.querySelector("#comfyui-body-top, .comfyui-body-top");
    return i && i.getBoundingClientRect().top === 0 ? i : document.querySelector("#comfy-menu, .comfyui-menu, .litegraph-menu, .comfyui-toolbar");
  }
  function l2() {
    const i = V();
    if (!i)
      return b2;
    const t = i.getBoundingClientRect();
    return !t || t.width === 0 && t.height === 0 ? b2 : t.top < 100 ? Math.max(b2, Math.ceil(t.bottom + 8)) : b2;
  }
  function y2() {
    const i = l2(), t = window.innerHeight || document.documentElement.clientHeight || 0, o = Math.max(t - i - S2, 280);
    document.documentElement.style.setProperty("--hk-top-offset", `${i}px`), document.documentElement.style.setProperty("--hk-panel-max-height", `${o}px`);
  }
  function Z2() {
    if (d2 || (d2 = !0, window.addEventListener("resize", y2), window.addEventListener("orientationchange", y2)), typeof ResizeObserver < "u") {
      const i = V();
      i && (v2 ? v2.disconnect() : v2 = new ResizeObserver(() => y2()), v2.observe(i));
    }
  }
  const K2 = [
    { type: "left", icon: Me, label: "Align left edges", group: "basic" },
    { type: "height-center", icon: Ve, label: "Center horizontally", group: "basic" },
    { type: "right", icon: Ee, label: "Align right edges", group: "basic" },
    { type: "top", icon: Se, label: "Align top edges", group: "basic" },
    { type: "width-center", icon: He, label: "Center vertically", group: "basic" },
    { type: "bottom", icon: _e, label: "Align bottom edges", group: "basic" }
  ], q2 = [
    { type: "width-max", icon: Be, label: "Match widest width", group: "size" },
    { type: "width-min", icon: Fe, label: "Match narrowest width", group: "size" },
    { type: "height-max", icon: Ne, label: "Match tallest height", group: "size" },
    { type: "height-min", icon: De, label: "Match shortest height", group: "size" },
    { type: "size-max", icon: Oe, label: "Match largest size", group: "size" },
    { type: "size-min", icon: Pe, label: "Match smallest size", group: "size" }
  ], J2 = [
    { type: "horizontal-flow", icon: Ze, label: "Distribute horizontally", group: "flow" },
    { type: "vertical-flow", icon: Te, label: "Distribute vertically", group: "flow" }
  ], k2 = [
    ["#553333", "#593930", "#335533", "#333355", "#3f5159", "#335555", "#553355", "#665533", "#000000"],
    ["#ff6f61", "#ff9a76", "#ffc36a", "#ffe29a", "#ffd6d1", "#ffa69e", "#ff7b89", "#ef5d60", "#c03a53"],
    ["#003f5c", "#2f4b7c", "#376996", "#3f7cac", "#49a3c7", "#56cfe1", "#72efdd", "#80ffdb", "#c0fdfb"],
    ["#2a6041", "#3b7d4f", "#4f945c", "#66ad71", "#81c784", "#a5d6a7", "#dcedc8", "#93b48b", "#6d8b74"],
    ["#150050", "#3f0071", "#610094", "#7b2cbf", "#c77dff", "#ff61d2", "#ff97c1", "#ffcbf2", "#ffe5f1"],
    ["#f6d1c1", "#f5b5c4", "#e9a6c1", "#d4a5e3", "#b4a0e5", "#9fc9eb", "#a7d7c5", "#d5e2b8", "#f1e3a0"],
    ["#3d0c02", "#7f2b0a", "#b3541e", "#d89a54", "#f2d0a9", "#c2956b", "#8c5a45", "#5a3d2b", "#2f1b10"],
    ["#0f0f3d", "#1b1b7d", "#3a0ca3", "#7209b7", "#f72585", "#ff0677", "#ff6d00", "#ff9f1c", "#ffbf69"],
    ["#051937", "#004d7a", "#008793", "#00bf72", "#a8eb12", "#dce35b", "#ffd23f", "#ff9b71", "#ef476f"],
    ["#0d1b2a", "#1b263b", "#274060", "#335c81", "#406e8e", "#4f83a1", "#5f9bbf", "#6faad1", "#8fc0e6"],
    ["#2b193d", "#412271", "#6a4c93", "#9b5de5", "#f15bb5", "#f9a1bc", "#feeafa", "#ffd6e0", "#ffe5f1"]
  ], L2 = 4.5, Q2 = "#AAAAAA";
  function T() {
    const i = "housekeeper-alignment-styles";
    if (document.getElementById(i)) return;
    const t = document.createElement("style");
    t.id = i, t.textContent = `
@import url('https://fonts.googleapis.com/css2?family=Gloria+Hallelujah&display=swap');

:root {
    --hk-accent: #8BC3F3;
    --hk-panel-bg: rgba(24, 26, 32, 0.95);
    --hk-panel-border: rgba(139, 195, 243, 0.35);
    --hk-handle-bg: rgba(32, 35, 42, 0.92);
    --hk-text-strong: #E8F3FF;
    --hk-text-muted: rgba(232, 243, 255, 0.74);
    --hk-top-offset: 48px;
    --hk-panel-max-height: calc(100vh - 96px);
    --hk-panel-width: clamp(270px, 18vw, min(270px, calc(100vw - 24px)));
    --hk-button-size: clamp(34px, 7vw, 40px);
    --hk-icon-size: clamp(16px, 4vw, 20px);
    --hk-button-gap: clamp(4px, 1vw, 8px);
    --hk-header-font-size: clamp(18px, 2vw, 22px);
    --hk-body-font-size: clamp(12px, 1.4vw, 14px);
    --hk-subtitle-font-size: clamp(11px, 1.3vw, 13px);
}


.housekeeper-wrapper {
    position: fixed;
    top: var(--hk-top-offset);
    right: 0;
    display: flex;
    flex-direction: row-reverse;
    align-items: flex-start;
    gap: 8px;
    padding-right: 4px;
    z-index: 1000;
    pointer-events: none;
}

.housekeeper-handle,
.housekeeper-panel {
    pointer-events: auto;
}

.housekeeper-handle {
    border: 1px solid var(--hk-panel-border);
    background: var(--hk-handle-bg);
    color: var(--hk-accent);
    border-radius: clamp(8px, 1.5vw, 12px) 0 0 clamp(8px, 1.5vw, 12px);
    padding: clamp(6px, 1.2vh, 10px) clamp(2px, 0.5vw, 4px) clamp(4px, 0.8vh, 6px) clamp(6px, 1.2vw, 9px);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: clamp(6px, 1.2vh, 8px);
    cursor: pointer;
    width: clamp(32px, 4vw, 48px);
    max-width: 44px;
    min-height: clamp(100px, 18vh, 140px);
    max-height: 140px;
    transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
    font-family: 'Gloria Hallelujah', cursive;
    font-size: clamp(10px, 1.4vw, 12px);
    letter-spacing: 0.08em;
    background-image: linear-gradient(160deg, rgba(139, 195, 243, 0.12), rgba(139, 195, 243, 0.05));
    margin-right: -4px;
}

.housekeeper-handle img {
    width: clamp(18px, 2.5vw, 24px);
    height: clamp(18px, 2.5vw, 24px);
    max-width: 24px;
    max-height: 24px;
}

.housekeeper-handle span {
    writing-mode: vertical-rl;
    transform: rotate(180deg);
    transition: transform 0.3s ease;
}

.housekeeper-wrapper.collapsed .housekeeper-handle span {
    transform: rotate(0deg);
}

.housekeeper-handle:focus-visible {
    outline: 2px solid var(--hk-accent);
    outline-offset: 2px;
}

.housekeeper-wrapper.hk-has-selection .housekeeper-handle {
    box-shadow: 0 0 14px rgba(139, 195, 243, 0.35);
}

.housekeeper-panel {
    width: var(--hk-panel-width);
    background: var(--hk-panel-bg);
    border: 1px solid var(--hk-panel-border);
    border-radius: 10px;
    padding: clamp(8px, 1vw, 10px) clamp(10px, 1.2vw, 14px);
    box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
    color: var(--hk-text-strong);
    font-family: 'Gloria Hallelujah', cursive;
    transform: translateX(110%);
    opacity: 0;
    max-height: var(--hk-panel-max-height);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.25s ease;
}

.housekeeper-wrapper.expanded .housekeeper-panel {
    transform: translateX(0);
    opacity: 1;
}

.housekeeper-wrapper.collapsed .housekeeper-panel {
    pointer-events: none;
}

.housekeeper-content {
    display: flex;
    flex-direction: column;
    gap: 0;
    flex: 1;
    overflow-y: auto;
    padding: 0 0 8px 0;
}

// .housekeeper-content > * + * {
//     margin-top: clamp(6px, 1vw, 12px);
// }

.housekeeper-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: var(--hk-accent);
}

.housekeeper-header-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: var(--hk-header-font-size);
    margin: 0;
}

.housekeeper-header-title img {
    width: 24px;
    height: 24px;
}

.housekeeper-close {
    background: transparent;
    border: none;
    color: var(--hk-accent);
    font-size: 24px;
    cursor: pointer;
    line-height: 1;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 24px;
    height: 24px;
    transition: transform 0.2s ease;
}

.housekeeper-close img {
    width: 24px;
    height: 24px;
}

.housekeeper-close:hover {
    opacity: 0.7;
}

.housekeeper-divider {
    height: 1px;
    background: rgba(139, 195, 243, 0.25);
    width: 100%;
    margin: 2px 0 4px;
}

.housekeeper-divider.housekeeper-divider-spaced {
    margin: clamp(10px, 1.5vw, 16px) 0 clamp(6px, 1vw, 12px);
}

.housekeeper-section {
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
}

.housekeeper-section-primary {
    margin-top: 0 !important;
}

.housekeeper-divider + .housekeeper-section-primary {
    margin-top: 0 !important;
}

.housekeeper-subtitle {
    font-size: var(--hk-subtitle-font-size);
    margin: 0;
    color: var(--hk-text-muted);
}

.housekeeper-palette-header,
.housekeeper-custom-inline,
.housekeeper-color-section-title {
    font-size: var(--hk-subtitle-font-size);
    color: var(--hk-text-muted);
}

.housekeeper-button-grid {
    display: flex;
    flex-wrap: wrap;
    // gap: var(--hk-button-gap);
    // padding: clamp(4px, 0.8vw, 6px);
    border-radius: 8px;
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(22, 24, 29, 0.6);
    justify-content: flex-start;
    align-items: center;
    width: 100%;
    --hk-button-unit: calc(100% / 6);
}

.hk-button {
    background: transparent;
    border: none;
    border-radius: 10px;
    flex: 0 0 var(--hk-button-unit);
    aspect-ratio: 1 / 1;
    max-width: var(--hk-button-unit);
    padding: clamp(2px, 0.6vw, 4px);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
    cursor: pointer;
}

.hk-button img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

.hk-button:hover:not(:disabled),
.hk-button:focus-visible {
    transform: translateY(-1px);
    background: rgba(139, 195, 243, 0.18);
    outline: none;
}

.hk-button:disabled {
    opacity: 0.35;
    cursor: not-allowed;
    box-shadow: none;
    transform: none;
}

.housekeeper-info {
    background: rgba(34, 37, 45, 0.9);
    border-radius: 12px;
    padding: 12px 16px;
    font-size: var(--hk-body-font-size);
    color: var(--hk-text-muted);
    text-align: left;
    line-height: 1.4;
}

.housekeeper-info small {
    display: block;
    margin-top: 6px;
    font-size: 12px;
    opacity: 0.7;
}

.housekeeper-wrapper.expanded .housekeeper-handle {
    display: none;
}

.housekeeper-wrapper.collapsed .housekeeper-handle {
    opacity: 0.85;
}

.housekeeper-color-strip,
.housekeeper-color-footer,
.housekeeper-color-recent {
    display: flex;
    flex-wrap: nowrap;
    gap: 4px;
    width: 100%;
    justify-content: flex-start;
}

.housekeeper-color-recent {
    justify-content: center;
}

.housekeeper-custom-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 12px;
    color: var(--hk-text-muted);
}

.hk-custom-toggle {
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(139, 195, 243, 0.12);
    color: var(--hk-accent);
    border-radius: 8px;
    padding: 4px 12px;
    cursor: pointer;
    font-size: 13px;
    transition: background 0.2s ease, transform 0.2s ease;
}

.hk-custom-toggle:hover {
    background: rgba(139, 195, 243, 0.22);
    transform: translateY(-1px);
}

.hk-custom-toggle:focus-visible {
    outline: 2px solid var(--hk-accent);
    outline-offset: 2px;
}

.housekeeper-custom-inline {
    display: flex;
    align-items: center;
    gap: clamp(4px, 0.8vw, 6px);
    margin-top: clamp(8px, 1.5vh, 12px);
}

.housekeeper-custom-inline span {
    color: var(--hk-text-muted);
    font-size: var(--hk-body-font-size);
    white-space: nowrap;
}

.hk-custom-inline-picker {
    width: 24px;
    height: 24px;
    padding: 0;
    border: none;
    background: transparent;
    cursor: pointer;
    border-radius: 4px;
    overflow: hidden;
}

.hk-custom-inline-picker::-webkit-color-swatch-wrapper {
    padding: 0;
}

.hk-custom-inline-picker::-webkit-color-swatch {
    border: none;
    border-radius: 4px;
}

.hk-custom-inline-picker::-moz-color-swatch {
    border: none;
    border-radius: 4px;
}

.hk-custom-hex-inline {
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(139, 195, 243, 0.35);
    padding: 4px 6px;
    color: var(--hk-text-strong);
    font-family: 'Gloria Hallelujah', cursive;
    letter-spacing: 0.04em;
    width: clamp(60px, 12vw, 80px);
    flex: 1;
    min-width: 60px;
}

.hk-custom-hex-inline::placeholder {
    color: rgba(232, 243, 255, 0.45);
}

.hk-custom-preview-inline {
    width: 42px;
    height: 32px;
    border-radius: 8px;
    border: 1px solid rgba(139, 195, 243, 0.35);
}

.hk-custom-apply-inline {
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(139, 195, 243, 0.12);
    color: var(--hk-accent);
    border-radius: 6px;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    line-height: 1;
    transition: background 0.2s ease, transform 0.2s ease;
}

.hk-custom-apply-inline:hover {
    background: rgba(139, 195, 243, 0.25);
    transform: translateY(-1px);
}

.hk-custom-apply-inline:focus-visible {
    outline: 2px solid var(--hk-accent);
    outline-offset: 2px;
}

.housekeeper-palette-header {
    display: flex;
    align-items: center;
    justify-content: left;
    gap: 6px;
    width: 100%;
    margin: 4px 0;
    color: var(--hk-text-muted);
}

.housekeeper-palette-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    width: 100%;
}

.housekeeper-color-strip {
    flex: 1;
    flex-wrap: nowrap;
    justify-content: center;
    min-width: 0;
}

.housekeeper-color-footer {
    flex-wrap: wrap;
    justify-content: flex-start;
}

.housekeeper-color-carousel {
    display: flex;
    align-items: center;
    gap: 6px;
    width: 100%;
}

.hk-palette-arrow {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
    border-radius: 6px;
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(139, 195, 243, 0.12);
    color: var(--hk-accent);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
    font-size: 11px;
    padding: 0;
}

.hk-palette-arrow:hover {
    background: rgba(139, 195, 243, 0.25);
    transform: translateY(-1px);
}

.hk-palette-arrow:focus-visible {
    outline: 2px solid var(--hk-accent);
    outline-offset: 2px;
}

.hk-color-chip {
    flex: 0 0 16px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: none;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    background: transparent;
}

.hk-color-chip:hover {
    transform: translateY(-1px);
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.25);
}

.hk-color-chip:focus-visible {
    outline: 2px solid var(--hk-accent);
    outline-offset: 2px;
}

.housekeeper-color-custom-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: var(--hk-body-font-size);
    color: var(--hk-text-muted);
    margin-top: 14px;
}

.hk-toggle-placeholder {
    width: 38px;
    height: 20px;
    border-radius: 12px;
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(139, 195, 243, 0.08);
    position: relative;
}

.hk-toggle-placeholder::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: rgba(139, 195, 243, 0.85);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

.housekeeper-color-picker-placeholder {
    margin-top: 16px;
    border: 1px solid rgba(139, 195, 243, 0.25);
    border-radius: 14px;
    background: linear-gradient(135deg, #ffffff 0%, #ff0000 50%, #000000 100%);
    height: clamp(160px, 32vh, 220px);
    position: relative;
    overflow: hidden;
}

.housekeeper-color-picker-toolbar {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 54px;
    background: rgba(16, 17, 21, 0.92);
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 0 16px;
    color: var(--hk-text-muted);
    font-size: var(--hk-body-font-size);
}

.housekeeper-color-picker-toolbar .hk-swatch {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.65);
}

.housekeeper-color-picker-toolbar .hk-slider-placeholder {
    flex: 1;
    height: 12px;
    border-radius: 8px;
    background: linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);
    box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.35);
}

.hk-rgb-placeholder {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: var(--hk-subtitle-font-size);
}

.hk-rgb-placeholder .hk-rgb-pill {
    width: 36px;
    height: 22px;
    border-radius: 6px;
    border: 1px solid rgba(139, 195, 243, 0.35);
    background: rgba(139, 195, 243, 0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--hk-text-muted);
    font-family: 'Gloria Hallelujah', cursive;
    letter-spacing: 0.04em;
}
`, document.head.appendChild(t);
  }
  T(), Z2(), y2();
  function s2() {
    const i = document.createElement("section");
    return i.className = "housekeeper-section", i;
  }
  function J(i) {
    const t = document.createElement("p");
    return t.className = "housekeeper-subtitle", t.textContent = i, t;
  }
  function _2(i, t) {
    const o = document.createElement("div");
    return o.className = `housekeeper-button-grid housekeeper-button-grid-${t}`, i.forEach((a) => {
      o.appendChild(B0(a));
    }), o;
  }
  function B0(i) {
    const t = document.createElement("button");
    t.type = "button", t.className = "hk-button", t.dataset.alignmentType = i.type, t.title = i.label, t.setAttribute("aria-label", i.label);
    const o = document.createElement("img");
    return o.src = i.icon, o.alt = "", o.draggable = !1, t.appendChild(o), t.addEventListener("mouseenter", () => y0(i.type)), t.addEventListener("mouseleave", () => R2()), t.addEventListener("focus", () => y0(i.type)), t.addEventListener("blur", () => R2()), t.addEventListener("click", () => A2(i.type)), t;
  }
  function h0(i) {
    const t = i.replace("#", "");
    if (t.length === 3) {
      const o = parseInt(t[0] + t[0], 16), a = parseInt(t[1] + t[1], 16), l = parseInt(t[2] + t[2], 16);
      return { r: o, g: a, b: l };
    }
    return t.length === 6 ? {
      r: parseInt(t.slice(0, 2), 16),
      g: parseInt(t.slice(2, 4), 16),
      b: parseInt(t.slice(4, 6), 16)
    } : null;
  }
  function F0(i, t, o) {
    const a = (l) => Math.max(0, Math.min(255, Math.round(l))).toString(16).padStart(2, "0");
    return `#${a(i)}${a(t)}${a(o)}`;
  }
  function e0(i) {
    const t = h0(i);
    if (!t) return null;
    const o = t.r / 255, a = t.g / 255, l = t.b / 255, n = Math.max(o, a, l), h = Math.min(o, a, l), f = n - h;
    let c = 0;
    f !== 0 && (n === o ? c = (a - l) / f % 6 : n === a ? c = (l - o) / f + 2 : c = (o - a) / f + 4), c = Math.round(c * 60), c < 0 && (c += 360);
    const y = (n + h) / 2, w = f === 0 ? 0 : f / (1 - Math.abs(2 * y - 1));
    return { h: c, s: w, l: y };
  }
  function u0(i, t, o) {
    const a = (1 - Math.abs(2 * o - 1)) * t, l = a * (1 - Math.abs(i / 60 % 2 - 1)), n = o - a / 2;
    let h = 0, f = 0, c = 0;
    return 0 <= i && i < 60 ? (h = a, f = l, c = 0) : 60 <= i && i < 120 ? (h = l, f = a, c = 0) : 120 <= i && i < 180 ? (h = 0, f = a, c = l) : 180 <= i && i < 240 ? (h = 0, f = l, c = a) : 240 <= i && i < 300 ? (h = l, f = 0, c = a) : (h = a, f = 0, c = l), F0((h + n) * 255, (f + n) * 255, (c + n) * 255);
  }
  function T2(i, t) {
    const o = e0(i);
    if (!o) return i;
    const a = Math.max(0, Math.min(1, o.l + t));
    return u0(o.h, o.s, a);
  }
  function V2(i) {
    const t = h0(i);
    return t ? N0(t) : 0;
  }
  function N0(i) {
    const t = (o) => {
      const a = o / 255;
      return a <= 0.03928 ? a / 12.92 : Math.pow((a + 0.055) / 1.055, 2.4);
    };
    return 0.2126 * t(i.r) + 0.7152 * t(i.g) + 0.0722 * t(i.b);
  }
  function f0(i, t) {
    const o = Math.max(i, t), a = Math.min(i, t);
    return (o + 0.05) / (a + 0.05);
  }
  function x2(i) {
    if (typeof i != "string") return null;
    let t = i.trim();
    return t ? (t.startsWith("#") || (t = `#${t}`), /^#([0-9a-fA-F]{3})$/.test(t) && (t = `#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`), /^#([0-9a-fA-F]{6})$/.test(t) ? t.toLowerCase() : null) : null;
  }
  function D0() {
    var o;
    const i = [], t = (o = window.LGraphCanvas) == null ? void 0 : o.node_colors;
    if (t)
      for (const a of Object.keys(t)) {
        const l = t[a], n = (l == null ? void 0 : l.bgcolor) || (l == null ? void 0 : l.color) || (l == null ? void 0 : l.groupcolor), h = x2(n);
        if (h && !i.includes(h) && i.push(h), i.length >= F) break;
      }
    return i.length || X.forEach((a) => {
      const l = x2(a);
      l && !i.includes(l) && i.length < F && i.push(l);
    }), i.slice(0, F);
  }
  function O0() {
    var i;
    try {
      const t = (i = window.localStorage) == null ? void 0 : i.getItem(R);
      if (t) {
        const o = JSON.parse(t);
        if (Array.isArray(o)) {
          const a = o.map((l) => x2(l)).filter((l) => !!l);
          if (a.length)
            return a.slice(0, F);
        }
      }
    } catch {
    }
    return D0();
  }
  function P0(i) {
    var t;
    try {
      (t = window.localStorage) == null || t.setItem(R, JSON.stringify(i));
    } catch {
    }
  }
  function g0() {
    z && (z.replaceChildren(), Y.forEach((i) => {
      const t = v0(i);
      z.appendChild(t);
    }));
  }
  function C0(i) {
    x2(i);
  }
  function d0(i) {
    const t = x2(i);
    t && (b && (b.value = t), k && (k.value = t.toUpperCase()), C0(t));
  }
  function Z0(i) {
    const t = x2(i);
    t && (Y = [t, ...Y.filter((o) => o !== t)], Y.length > F && (Y.length = F), P0(Y), g0(), d0(t));
  }
  function t0(i) {
    const t = x2(i);
    t && (w0(t), B2());
  }
  function T0(i) {
    const t = V2(i), o = V2(Q2);
    let a = f0(t, o);
    if (a >= L2) return i;
    const l = e0(i);
    if (!l) return i;
    const n = t > o ? -1 : 1;
    let h = l.l, f = n > 0 ? 0.98 : 0.02, c = i, y = a;
    for (let w = 0; w < 12; w++) {
      const x = h + (f - h) * 0.5, $ = u0(l.h, l.s, Math.max(0.02, Math.min(0.98, x))), t2 = V2($), O = f0(t2, o);
      O >= L2 ? (c = $, y = O, n > 0 ? h = x : f = x) : n > 0 ? f = x : h = x;
    }
    return y >= L2 ? c : i;
  }
  function m0(i, t, o, a = 6) {
    let l = t, n = 0;
    for (; Math.abs(V2(i) - V2(l)) < 0.08 && n < a; ) {
      const h = T2(l, o);
      if (h === l) break;
      l = h, n += 1;
    }
    return l;
  }
  function H2(i) {
    const o = i.startsWith("#") ? i : `#${i}`;
    let a = T0(o);
    const l = e0(a);
    let n;
    l && l.l < 0.4 ? n = T2(a, 0.12) : n = T2(a, -0.16);
    let h = T2(a, 0.12);
    return n = m0(a, n, l && l.l < 0.4 ? 0.08 : -0.08), h = m0(a, h, 0.08), {
      color: n,
      bgcolor: a,
      groupcolor: h
    };
  }
  function w0(i) {
    var n, h, f;
    const t = [...m, ...r2];
    if (!t.length) {
      M2("Select nodes or groups to apply color", "warning");
      return;
    }
    const o = H2(i), a = /* @__PURE__ */ new Set();
    t.forEach((c) => {
      c != null && c.graph && a.add(c.graph);
    }), a.forEach((c) => {
      var y;
      return (y = c == null ? void 0 : c.beforeChange) == null ? void 0 : y.call(c);
    }), t.forEach((c) => {
      i0(c, o);
    }), a.forEach((c) => {
      var y;
      return (y = c == null ? void 0 : c.afterChange) == null ? void 0 : y.call(c);
    }), Z0(o.bgcolor);
    const l = ((n = window.LGraphCanvas) == null ? void 0 : n.active_canvas) ?? ((h = window.app) == null ? void 0 : h.canvas);
    (f = l == null ? void 0 : l.setDirty) == null || f.call(l, !0, !0);
  }
  function i0(i, t) {
    typeof i.setColorOption == "function" ? i.setColorOption(t) : (i.color = t.color, i.bgcolor = t.bgcolor, i.groupcolor = t.groupcolor);
  }
  function I2(i) {
    var t;
    e2.active && ((t = e2.colorOption) == null ? void 0 : t.bgcolor) === i.bgcolor || (e2.active = !0, e2.colorOption = i, e2.nodes.clear(), e2.groups.clear(), m.forEach((o) => {
      e2.nodes.set(o, {
        color: o.color,
        bgcolor: o.bgcolor,
        groupcolor: o.groupcolor
      });
    }), r2.forEach((o) => {
      e2.groups.set(o, {
        color: o.color
      });
    }));
  }
  function r0(i) {
    var o, a, l;
    m.forEach((n) => i0(n, i)), r2.forEach((n) => i0(n, i));
    const t = ((o = window.LGraphCanvas) == null ? void 0 : o.active_canvas) ?? ((a = window.app) == null ? void 0 : a.canvas);
    (l = t == null ? void 0 : t.setDirty) == null || l.call(t, !0, !0);
  }
  function B2() {
    var o, a, l;
    if (!e2.active) return;
    let i;
    for (const n of e2.nodes.values())
      if (n.bgcolor) {
        i = n.bgcolor;
        break;
      }
    if (!i) {
      for (const n of e2.groups.values())
        if (n.color) {
          i = n.color;
          break;
        }
    }
    e2.nodes.forEach((n, h) => {
      h && (typeof h.setColorOption == "function" ? n.color === void 0 && n.bgcolor === void 0 && n.groupcolor === void 0 ? h.setColorOption(null) : h.setColorOption({
        color: n.color,
        bgcolor: n.bgcolor,
        groupcolor: n.groupcolor
      }) : (n.color === void 0 ? delete h.color : h.color = n.color, n.bgcolor === void 0 ? delete h.bgcolor : h.bgcolor = n.bgcolor, n.groupcolor === void 0 ? delete h.groupcolor : h.groupcolor = n.groupcolor));
    }), e2.groups.forEach((n, h) => {
      h && (typeof h.setColorOption == "function" ? n.color === void 0 ? h.setColorOption(null) : h.setColorOption({
        color: n.color,
        bgcolor: n.color,
        groupcolor: n.color
      }) : n.color === void 0 ? delete h.color : h.color = n.color);
    }), e2.active = !1, e2.colorOption = null;
    const t = ((o = window.LGraphCanvas) == null ? void 0 : o.active_canvas) ?? ((a = window.app) == null ? void 0 : a.canvas);
    (l = t == null ? void 0 : t.setDirty) == null || l.call(t, !0, !0);
  }
  function I0(i, t) {
    const o = (a) => {
      a == null || a.preventDefault(), e2.active = !1, e2.colorOption = null, e2.nodes.clear(), e2.groups.clear(), g2 = !0, w0(t);
    };
    i.addEventListener("click", o), i.addEventListener("keydown", (a) => {
      (a.key === "Enter" || a.key === " ") && (a.preventDefault(), o());
    }), i.addEventListener("mouseenter", () => {
      if (g2) return;
      const a = H2(t);
      I2(a), r0(a);
    }), i.addEventListener("focus", () => {
      const a = H2(t);
      I2(a), r0(a);
    }), i.addEventListener("mouseleave", () => B2()), i.addEventListener("blur", () => B2());
  }
  function v0(i, t = !0) {
    const o = H2(i), a = o.bgcolor.toUpperCase(), l = document.createElement(t ? "button" : "div");
    return t && (l.type = "button", l.setAttribute("aria-label", `Apply color ${a}`), l.title = `Apply color ${a}`), l.className = "hk-color-chip", l.style.background = o.bgcolor, l.style.borderColor = o.color, l.dataset.colorHex = o.bgcolor, t && I0(l, i), l;
  }
  function b0(i, t) {
    if (!k2.length) return;
    const o = k2.length, a = (t % o + o) % o;
    I = a;
    const l = k2[a];
    i.replaceChildren(), l.forEach((n) => {
      const h = v0(n);
      i.appendChild(h);
    }), i.setAttribute("aria-label", `Color harmony palette ${a + 1} of ${o}`);
  }
  function R0() {
    A && (y2(), D = !0, A.classList.remove("collapsed"), A.classList.add("expanded"), setTimeout(() => {
      _ == null || _.focus();
    }, 0));
  }
  function $0() {
    A && (D = !1, A.classList.remove("expanded"), A.classList.add("collapsed"), H == null || H.focus());
  }
  function s0(i) {
    (typeof i == "boolean" ? i : !D) ? R0() : $0();
  }
  function W0() {
    if (_) return;
    A = document.createElement("div"), A.className = "housekeeper-wrapper collapsed", H = document.createElement("button"), H.type = "button", H.className = "housekeeper-handle", H.title = "Toggle Housekeeper panel (Ctrl+Shift+H)";
    const i = document.createElement("img");
    i.src = S0, i.alt = "", i.draggable = !1, H.appendChild(i);
    const t = document.createElement("span");
    t.textContent = "Housekeeper", H.appendChild(t), H.addEventListener("click", () => s0()), _ = document.createElement("div"), _.className = "housekeeper-panel", _.setAttribute("role", "region"), _.setAttribute("aria-label", "Housekeeper alignment tools"), _.tabIndex = -1, _.addEventListener("mousemove", () => {
      g2 && (g2 = !1);
    });
    const o = document.createElement("div");
    o.className = "housekeeper-content";
    const a = document.createElement("div");
    a.className = "housekeeper-header";
    const l = document.createElement("div");
    l.className = "housekeeper-header-title";
    const n = document.createElement("img");
    n.src = S0, n.alt = "", n.draggable = !1, l.appendChild(n);
    const h = document.createElement("span");
    h.textContent = "Housekeeper", l.appendChild(h);
    const f = document.createElement("button");
    f.type = "button", f.className = "housekeeper-close", f.setAttribute("aria-label", "Hide Housekeeper panel");
    const c = document.createElement("img");
    c.src = Ae, c.alt = "", c.draggable = !1, f.appendChild(c), f.addEventListener("click", () => s0(!1)), a.appendChild(l), a.appendChild(f);
    const y = document.createElement("div");
    y.className = "housekeeper-divider";
    const w = s2();
    w.classList.add("housekeeper-section-primary"), w.appendChild(J("Basic Alignment")), w.appendChild(_2(K2, "basic")), w.appendChild(J("Size Adjustment")), w.appendChild(_2(q2, "size")), w.appendChild(J("Flow Alignment")), w.appendChild(_2(J2, "flow"));
    const x = s2(), $ = document.createElement("div");
    $.className = "housekeeper-palette-header", $.classList.add("housekeeper-color-section-title");
    const t2 = document.createElement("span");
    t2.textContent = "Preset palettes", $.appendChild(t2), x.appendChild($);
    const O = document.createElement("div");
    O.className = "housekeeper-palette-row";
    const u = document.createElement("button");
    u.type = "button", u.className = "hk-palette-arrow hk-palette-arrow-prev", u.innerHTML = "&#9664;", O.appendChild(u);
    const v = document.createElement("div");
    v.className = "housekeeper-color-strip", v.setAttribute("role", "group"), O.appendChild(v);
    const s = document.createElement("button");
    s.type = "button", s.className = "hk-palette-arrow hk-palette-arrow-next", s.innerHTML = "&#9654;", O.appendChild(s), x.appendChild(O);
    const M = () => {
      const W = k2.length, c2 = (I - 1 + W) % W, f2 = (I + 1) % W;
      u.setAttribute("aria-label", `Show color set ${c2 + 1} of ${W}`), s.setAttribute("aria-label", `Show color set ${f2 + 1} of ${W}`);
    }, P = (W) => {
      const c2 = k2.length;
      c2 && (I = (I + W + c2) % c2, b0(v, I), M());
    };
    u.addEventListener("click", () => P(-1)), s.addEventListener("click", () => P(1)), b0(v, I), M();
    const o2 = document.createElement("div");
    o2.className = "housekeeper-custom-inline";
    const z2 = document.createElement("span");
    z2.textContent = "Custom", o2.appendChild(z2), b = document.createElement("input"), b.type = "color", b.className = "hk-custom-inline-picker", o2.appendChild(b), k = document.createElement("input"), k.type = "text", k.placeholder = "#RRGGBB", k.maxLength = 7, k.className = "hk-custom-hex-inline", o2.appendChild(k);
    const Q = document.createElement("button");
    Q.type = "button", Q.className = "hk-custom-apply-inline", Q.textContent = "", Q.setAttribute("aria-label", "Apply custom color"), Q.title = "Apply custom color", o2.appendChild(Q), x.appendChild(o2);
    const n2 = J("Recent colors");
    n2.classList.add("housekeeper-color-section-title"), x.appendChild(n2), z = document.createElement("div"), z.className = "housekeeper-color-recent", g0(), x.appendChild(z);
    const g = Y[0] || X[0];
    d0(g);
    const S = (W, c2) => {
      const f2 = x2(W);
      if (!f2 || (c2 === "color" && k && (k.value = f2.toUpperCase()), c2 === "text" && b && (b.value = f2), C0(f2), !m.length && !r2.length)) return;
      const m2 = H2(f2);
      I2(m2), r0(m2);
    };
    b == null || b.addEventListener("input", () => S(b.value, "color")), b == null || b.addEventListener("change", () => t0(b.value)), b == null || b.addEventListener("click", () => I2(H2(b.value))), b == null || b.addEventListener("blur", () => B2()), k == null || k.addEventListener("input", () => S(k.value, "text")), k == null || k.addEventListener("keydown", (W) => {
      W.key === "Enter" && (W.preventDefault(), t0(k.value));
    }), k == null || k.addEventListener("blur", () => B2());
    const G = () => t0((k == null ? void 0 : k.value) || (b == null ? void 0 : b.value) || g);
    Q.addEventListener("click", () => G()), o2.addEventListener("keydown", (W) => {
      (W.metaKey || W.ctrlKey) && W.key.toLowerCase() === "enter" && (W.preventDefault(), G());
    }), o2.addEventListener("dblclick", () => G()), o.appendChild(a), o.appendChild(y), o.appendChild(w);
    const N = document.createElement("div");
    N.className = "housekeeper-divider", N.style.marginTop = "10px", o.appendChild(N), o.appendChild(x), _.appendChild(o), A.appendChild(H), A.appendChild(_), document.body.appendChild(A), Z2(), y2();
  }
  function y0(i) {
    var a;
    if (m.length < 1 || m.length < 2 && i !== "size-min") return;
    R2();
    const t = (a = window.app) == null ? void 0 : a.canvas;
    if (!t) return;
    Y0(i, m).forEach((l, n) => {
      if (l && m[n]) {
        const h = document.createElement("div");
        h.style.cssText = `
                    position: fixed;
                    background: rgba(74, 144, 226, 0.3);
                    border: 2px dashed rgba(74, 144, 226, 0.7);
                    border-radius: 4px;
                    z-index: 999;
                    pointer-events: none;
                    transition: all 0.2s ease;
                `;
        const f = (l.x + t.ds.offset[0]) * t.ds.scale, c = (l.y + t.ds.offset[1]) * t.ds.scale, y = t.canvas.parentElement, w = t.canvas.getBoundingClientRect(), x = y ? y.getBoundingClientRect() : null;
        x && w.top - x.top, w.top;
        const $ = document.querySelector("nav");
        let t2 = 31;
        $ && (t2 = $.getBoundingClientRect().height);
        const O = t2 * t.ds.scale, u = w.left + f, v = w.top + c - O, s = l.width * t.ds.scale, M = l.height * t.ds.scale;
        h.style.left = u + "px", h.style.top = v + "px", h.style.width = s + "px", h.style.height = M + "px", document.body.appendChild(h), K.push(h);
      }
    });
  }
  function R2() {
    K.forEach((i) => {
      i.parentNode && i.parentNode.removeChild(i);
    }), K = [];
  }
  function Y0(i, t) {
    if (t.length < 2) return [];
    const o = [], a = Math.min(...t.map((f) => f.pos[0])), l = Math.max(...t.map((f) => {
      let c = 150;
      return f.size && Array.isArray(f.size) && f.size[0] ? c = f.size[0] : typeof f.width == "number" ? c = f.width : f.properties && typeof f.properties.width == "number" && (c = f.properties.width), f.pos[0] + c;
    })), n = Math.min(...t.map((f) => f.pos[1])), h = Math.max(...t.map((f) => {
      let c = 100;
      return f.size && Array.isArray(f.size) && f.size[1] ? c = f.size[1] : typeof f.height == "number" ? c = f.height : f.properties && typeof f.properties.height == "number" && (c = f.properties.height), f.pos[1] + c;
    }));
    switch (i) {
      case "left":
        const f = [...t].sort((e, p) => e.pos[1] - p.pos[1]);
        let c = f[0].pos[1];
        const y = /* @__PURE__ */ new Map();
        f.forEach((e) => {
          let p = 100, d = 150;
          e.size && Array.isArray(e.size) ? (e.size[1] && (p = e.size[1]), e.size[0] && (d = e.size[0])) : (typeof e.height == "number" && (p = e.height), typeof e.width == "number" && (d = e.width), e.properties && (typeof e.properties.height == "number" && (p = e.properties.height), typeof e.properties.width == "number" && (d = e.properties.width))), y.set(e.id, {
            x: a,
            y: c,
            width: d,
            height: p
          }), c += p + 30;
        }), t.forEach((e) => {
          o.push(y.get(e.id));
        });
        break;
      case "right":
        const w = [...t].sort((e, p) => e.pos[1] - p.pos[1]);
        let x = w[0].pos[1];
        const $ = /* @__PURE__ */ new Map();
        w.forEach((e) => {
          let p = 100, d = 150;
          e.size && Array.isArray(e.size) ? (e.size[1] && (p = e.size[1]), e.size[0] && (d = e.size[0])) : (typeof e.height == "number" && (p = e.height), typeof e.width == "number" && (d = e.width), e.properties && (typeof e.properties.height == "number" && (p = e.properties.height), typeof e.properties.width == "number" && (d = e.properties.width))), $.set(e.id, {
            x: l - d,
            y: x,
            width: d,
            height: p
          }), x += p + 30;
        }), t.forEach((e) => {
          o.push($.get(e.id));
        });
        break;
      case "top":
        const t2 = [...t].sort((e, p) => e.pos[0] - p.pos[0]);
        let O = t2[0].pos[0];
        const u = /* @__PURE__ */ new Map();
        t2.forEach((e) => {
          let p = 100, d = 150;
          e.size && Array.isArray(e.size) ? (e.size[1] && (p = e.size[1]), e.size[0] && (d = e.size[0])) : (typeof e.height == "number" && (p = e.height), typeof e.width == "number" && (d = e.width), e.properties && (typeof e.properties.height == "number" && (p = e.properties.height), typeof e.properties.width == "number" && (d = e.properties.width))), u.set(e.id, {
            x: O,
            y: n,
            width: d,
            height: p
          }), O += d + 30;
        }), t.forEach((e) => {
          o.push(u.get(e.id));
        });
        break;
      case "bottom":
        const v = [...t].sort((e, p) => e.pos[0] - p.pos[0]);
        let s = a;
        const M = /* @__PURE__ */ new Map();
        v.forEach((e) => {
          let p = 100, d = 150;
          e.size && Array.isArray(e.size) ? (e.size[1] && (p = e.size[1]), e.size[0] && (d = e.size[0])) : (typeof e.height == "number" && (p = e.height), typeof e.width == "number" && (d = e.width), e.properties && (typeof e.properties.height == "number" && (p = e.properties.height), typeof e.properties.width == "number" && (d = e.properties.width))), M.set(e.id, {
            x: s,
            y: h - p,
            width: d,
            height: p
          }), s += d + 30;
        }), t.forEach((e) => {
          o.push(M.get(e.id));
        });
        break;
      case "height-center":
        const P = Math.min(...t.map((e) => e.pos[0])), o2 = Math.max(...t.map((e) => {
          let p = 150;
          return e.size && Array.isArray(e.size) && e.size[0] ? p = e.size[0] : typeof e.width == "number" ? p = e.width : e.properties && typeof e.properties.width == "number" && (p = e.properties.width), e.pos[0] + p;
        })), z2 = (P + o2) / 2, Q = [...t].sort((e, p) => e.pos[1] - p.pos[1]);
        let n2 = Q[0].pos[1];
        const g = /* @__PURE__ */ new Map();
        Q.forEach((e) => {
          let p = 150, d = 100;
          e.size && Array.isArray(e.size) ? (e.size[0] && (p = e.size[0]), e.size[1] && (d = e.size[1])) : (typeof e.width == "number" && (p = e.width), typeof e.height == "number" && (d = e.height), e.properties && (typeof e.properties.width == "number" && (p = e.properties.width), typeof e.properties.height == "number" && (d = e.properties.height))), g.set(e.id, {
            x: z2 - p / 2,
            y: n2,
            width: p,
            height: d
          }), n2 += d + 30;
        }), t.forEach((e) => {
          o.push(g.get(e.id));
        });
        break;
      case "width-center":
        const S = Math.min(...t.map((e) => e.pos[1])), G = Math.max(...t.map((e) => {
          let p = 100;
          return e.size && Array.isArray(e.size) && e.size[1] ? p = e.size[1] : typeof e.height == "number" ? p = e.height : e.properties && typeof e.properties.height == "number" && (p = e.properties.height), e.pos[1] + p;
        })), N = (S + G) / 2, W = [...t].sort((e, p) => e.pos[0] - p.pos[0]);
        let c2 = W[0].pos[0];
        const f2 = /* @__PURE__ */ new Map();
        W.forEach((e) => {
          let p = 150, d = 100;
          e.size && Array.isArray(e.size) ? (e.size[0] && (p = e.size[0]), e.size[1] && (d = e.size[1])) : (typeof e.width == "number" && (p = e.width), typeof e.height == "number" && (d = e.height), e.properties && (typeof e.properties.width == "number" && (p = e.properties.width), typeof e.properties.height == "number" && (d = e.properties.height))), f2.set(e.id, {
            x: c2,
            y: N - d / 2,
            width: p,
            height: d
          }), c2 += p + 30;
        }), t.forEach((e) => {
          o.push(f2.get(e.id));
        });
        break;
      case "horizontal-flow":
        const m2 = t.filter((e) => {
          if (!e) return !1;
          const p = e.pos || e.position || typeof e.x == "number" && typeof e.y == "number", d = e.size || e.width || e.height || typeof e.width == "number" && typeof e.height == "number";
          return !!p && !!d;
        });
        if (m2.length < 2) break;
        const G2 = Math.min(...m2.map((e) => e.pos && (Array.isArray(e.pos) || e.pos.length !== void 0) ? e.pos[0] : e.position && (Array.isArray(e.position) || e.position.length !== void 0) ? e.position[0] : typeof e.x == "number" ? e.x : 0)), r = Math.min(...m2.map((e) => e.pos && (Array.isArray(e.pos) || e.pos.length !== void 0) ? e.pos[1] : e.position && (Array.isArray(e.position) || e.position.length !== void 0) ? e.position[1] : typeof e.y == "number" ? e.y : 0)), L = m2.map((e) => ({
          ...e,
          pos: e.pos ? [...e.pos] : [e.x || 0, e.y || 0],
          _calculatedSize: e.size && Array.isArray(e.size) ? [e.size[0], e.size[1]] : [e.width || 150, e.height || 100]
        })), U = W2(L), E = Y2(L, U), C2 = 30, o0 = 30, a0 = 0, F2 = {};
        L.forEach((e) => {
          var p;
          if (e && e.id) {
            const d = ((p = E[e.id]) == null ? void 0 : p.level) ?? 0;
            F2[d] || (F2[d] = []), F2[d].push(e);
          }
        });
        const z0 = /* @__PURE__ */ new Map();
        Object.entries(F2).forEach(([e, p]) => {
          const d = parseInt(e);
          if (p && p.length > 0) {
            p.sort((C, Z) => {
              const u2 = C && C.id && E[C.id] ? E[C.id].order : 0, B = Z && Z.id && E[Z.id] ? E[Z.id].order : 0;
              return u2 - B;
            });
            let p2 = G2;
            if (d > 0)
              for (let C = 0; C < d; C++) {
                const Z = F2[C] || [], u2 = Math.max(...Z.map(
                  (B) => B && B._calculatedSize && B._calculatedSize[0] ? B._calculatedSize[0] : 150
                ));
                p2 += u2 + C2 + a0;
              }
            let h2 = r;
            p.forEach((C) => {
              C && C._calculatedSize && (z0.set(C.id, {
                x: p2,
                y: h2,
                width: C._calculatedSize[0],
                height: C._calculatedSize[1]
              }), h2 += C._calculatedSize[1] + o0);
            });
          }
        }), t.forEach((e) => {
          const p = z0.get(e.id);
          p && o.push(p);
        });
        break;
      case "vertical-flow":
        const X2 = t.filter((e) => {
          if (!e) return !1;
          const p = e.pos || e.position || typeof e.x == "number" && typeof e.y == "number", d = e.size || e.width || e.height || typeof e.width == "number" && typeof e.height == "number";
          return !!p && !!d;
        });
        if (X2.length < 2) break;
        const q0 = Math.min(...X2.map((e) => e.pos && (Array.isArray(e.pos) || e.pos.length !== void 0) ? e.pos[0] : e.position && (Array.isArray(e.position) || e.position.length !== void 0) ? e.position[0] : typeof e.x == "number" ? e.x : 0)), J0 = Math.min(...X2.map((e) => e.pos && (Array.isArray(e.pos) || e.pos.length !== void 0) ? e.pos[1] : e.position && (Array.isArray(e.position) || e.position.length !== void 0) ? e.position[1] : typeof e.y == "number" ? e.y : 0)), l0 = X2.map((e) => ({
          ...e,
          pos: e.pos ? [...e.pos] : [e.x || 0, e.y || 0],
          _calculatedSize: e.size && Array.isArray(e.size) ? [e.size[0], e.size[1]] : [e.width || 150, e.height || 100]
        })), Q0 = W2(l0), N2 = Y2(l0, Q0), ee = 30, te = 30, ie = 0, D2 = {};
        l0.forEach((e) => {
          var p;
          if (e && e.id) {
            const d = ((p = N2[e.id]) == null ? void 0 : p.level) ?? 0;
            D2[d] || (D2[d] = []), D2[d].push(e);
          }
        });
        const k0 = /* @__PURE__ */ new Map();
        Object.entries(D2).forEach(([e, p]) => {
          const d = parseInt(e);
          if (p && p.length > 0) {
            p.sort((C, Z) => {
              const u2 = C && C.id && N2[C.id] ? N2[C.id].order : 0, B = Z && Z.id && N2[Z.id] ? N2[Z.id].order : 0;
              return u2 - B;
            });
            let p2 = J0;
            if (d > 0)
              for (let C = 0; C < d; C++) {
                const Z = D2[C] || [], u2 = Math.max(...Z.map(
                  (B) => B && B._calculatedSize && B._calculatedSize[1] ? B._calculatedSize[1] : 100
                ));
                p2 += u2 + ee + ie;
              }
            let h2 = q0;
            p.forEach((C) => {
              C && C._calculatedSize && (k0.set(C.id, {
                x: h2,
                y: p2,
                width: C._calculatedSize[0],
                height: C._calculatedSize[1]
              }), h2 += C._calculatedSize[0] + te);
            });
          }
        }), t.forEach((e) => {
          const p = k0.get(e.id);
          p && o.push(p);
        });
        break;
      case "width-max":
      case "width-min":
      case "height-max":
      case "height-min":
      case "size-max":
      case "size-min":
        t.forEach((e) => {
          let p = 150, d = 100;
          e.size && Array.isArray(e.size) ? (e.size[0] && (p = e.size[0]), e.size[1] && (d = e.size[1])) : (typeof e.width == "number" && (p = e.width), typeof e.height == "number" && (d = e.height), e.properties && (typeof e.properties.width == "number" && (p = e.properties.width), typeof e.properties.height == "number" && (d = e.properties.height)));
          let p2 = p, h2 = d;
          if (i === "width-max" || i === "size-max")
            p2 = Math.max(...t.map((C) => C.size && Array.isArray(C.size) && C.size[0] ? C.size[0] : typeof C.width == "number" ? C.width : C.properties && typeof C.properties.width == "number" ? C.properties.width : 150));
          else if (i === "width-min")
            p2 = Math.min(...t.map((C) => C.size && Array.isArray(C.size) && C.size[0] ? C.size[0] : typeof C.width == "number" ? C.width : C.properties && typeof C.properties.width == "number" ? C.properties.width : 150));
          else if (i === "size-min") {
            const C = j.get(e) || e.computeSize;
            if (C)
              try {
                const Z = C.call(e);
                Z && Z.length >= 2 && Z[0] !== void 0 && Z[1] !== void 0 ? (p2 = Z[0], h2 = Z[1] + 30) : typeof Z == "number" ? (p2 = p, h2 = Z + 30) : (p2 = p, h2 = d);
              } catch {
                p2 = p, h2 = d;
              }
          }
          if (i === "height-max" || i === "size-max")
            h2 = Math.max(...t.map((C) => C.size && Array.isArray(C.size) && C.size[1] ? C.size[1] : typeof C.height == "number" ? C.height : C.properties && typeof C.properties.height == "number" ? C.properties.height : 100));
          else if (i === "height-min") {
            const C = Math.min(...t.map((B) => B.size && B.size[1] !== void 0 ? B.size[1] : typeof B.height == "number" ? B.height : B.properties && typeof B.properties.height == "number" ? B.properties.height : 100)), Z = j.get(e) || e.computeSize;
            let u2 = null;
            if (Z)
              try {
                const B = Z.call(e);
                B && B.length >= 2 && B[1] !== void 0 ? u2 = B[1] + 30 : typeof B == "number" && (u2 = B + 30);
              } catch {
              }
            h2 = u2 && u2 > C ? u2 : C;
          }
          o.push({
            x: e.pos[0],
            y: e.pos[1],
            width: p2,
            height: h2
          });
        });
        break;
    }
    return o;
  }
  function $2() {
    var n;
    if (!((n = window.app) != null && n.graph)) return;
    const i = window.app.graph;
    m = Object.values(i._nodes || {}).filter((h) => h && h.is_selected), r2 = (Array.isArray(i._groups) ? i._groups : []).filter((h) => h && h.selected);
    const a = m.length > 1;
    m.length + r2.length, a || R2(), A && A.classList.toggle("hk-has-selection", a);
    const l = _ == null ? void 0 : _.querySelectorAll(".hk-button");
    l == null || l.forEach((h) => {
      const f = h.dataset.alignmentType === "size-min";
      h.disabled = f ? m.length < 1 : !a;
    });
  }
  function W2(i) {
    const t = {}, o = i.filter((a) => a && (a.id !== void 0 || a.id !== null));
    return o.forEach((a) => {
      const l = a.id || `node_${o.indexOf(a)}`;
      a.id = l, t[l] = { inputs: [], outputs: [] }, a.inputs && Array.isArray(a.inputs) && a.inputs.forEach((n, h) => {
        n && n.link !== null && n.link !== void 0 && t[l].inputs.push({
          index: h,
          link: n.link,
          sourceNode: G0(n.link, o)
        });
      }), a.outputs && Array.isArray(a.outputs) && a.outputs.forEach((n, h) => {
        n && n.links && Array.isArray(n.links) && n.links.length > 0 && n.links.forEach((f) => {
          const c = X0(f, o);
          c && t[l].outputs.push({
            index: h,
            link: f,
            targetNode: c
          });
        });
      });
    }), t;
  }
  function G0(i, t) {
    for (const o of t)
      if (o && o.outputs && Array.isArray(o.outputs)) {
        for (const a of o.outputs)
          if (a && a.links && Array.isArray(a.links) && a.links.includes(i))
            return o;
      }
    return null;
  }
  function X0(i, t) {
    for (const o of t)
      if (o && o.inputs && Array.isArray(o.inputs)) {
        for (const a of o.inputs)
          if (a && a.link === i)
            return o;
      }
    return null;
  }
  function Y2(i, t) {
    const o = {}, a = /* @__PURE__ */ new Set(), l = i.filter((c) => c && c.id), n = l.filter((c) => {
      const y = c.id;
      return !t[y] || !t[y].inputs.length || t[y].inputs.every((w) => !w.sourceNode);
    });
    n.length === 0 && l.length > 0 && n.push(l[0]);
    const h = n.map((c) => ({ node: c, level: 0 }));
    for (; h.length > 0; ) {
      const { node: c, level: y } = h.shift();
      !c || !c.id || a.has(c.id) || (a.add(c.id), o[c.id] = { level: y, order: 0 }, t[c.id] && t[c.id].outputs && t[c.id].outputs.forEach((w) => {
        w && w.targetNode && w.targetNode.id && !a.has(w.targetNode.id) && h.push({ node: w.targetNode, level: y + 1 });
      }));
    }
    l.forEach((c) => {
      c && c.id && !o[c.id] && (o[c.id] = { level: 0, order: 0 });
    });
    const f = {};
    return Object.entries(o).forEach(([c, y]) => {
      f[y.level] || (f[y.level] = []);
      const w = l.find((x) => x && x.id === c);
      w && f[y.level].push(w);
    }), Object.entries(f).forEach(([c, y]) => {
      y && y.length > 0 && (y.sort((w, x) => {
        const $ = w && w.pos && w.pos[1] ? w.pos[1] : 0, t2 = x && x.pos && x.pos[1] ? x.pos[1] : 0;
        return $ - t2;
      }), y.forEach((w, x) => {
        w && w.id && o[w.id] && (o[w.id].order = x);
      }));
    }), o;
  }
  function A2(i) {
    var t, o, a, l, n;
    if (m.length < 1 || m.length < 2 && i !== "size-min") {
      M2("Please select at least 2 nodes to align", "warning");
      return;
    }
    try {
      const h = Math.min(...m.map((u) => u.pos[0])), f = Math.max(...m.map((u) => {
        let v = 150;
        return u.size && Array.isArray(u.size) && u.size[0] ? v = u.size[0] : typeof u.width == "number" ? v = u.width : u.properties && typeof u.properties.width == "number" && (v = u.properties.width), u.pos[0] + v;
      })), c = Math.min(...m.map((u) => u.pos[1])), y = Math.max(...m.map((u) => {
        let v = 100;
        return u.size && Array.isArray(u.size) && u.size[1] ? v = u.size[1] : typeof u.height == "number" ? v = u.height : u.properties && typeof u.properties.height == "number" && (v = u.properties.height), u.pos[1] + v;
      })), w = Math.max(...m.map((u) => {
        const v = q.get(u);
        if (v && v.width !== void 0) return v.width;
        let s = 150;
        return u.size && Array.isArray(u.size) && u.size[0] ? s = u.size[0] : typeof u.width == "number" ? s = u.width : u.properties && typeof u.properties.width == "number" && (s = u.properties.width), s;
      })), x = Math.min(...m.map((u) => {
        const v = q.get(u);
        if (v && v.width !== void 0) return v.width;
        let s = 150;
        return u.size && Array.isArray(u.size) && u.size[0] ? s = u.size[0] : typeof u.width == "number" ? s = u.width : u.properties && typeof u.properties.width == "number" && (s = u.properties.width), s;
      })), $ = Math.max(...m.map((u) => {
        const v = q.get(u);
        return v && v.height !== void 0 ? v.height : u.size && u.size[1] !== void 0 ? u.size[1] : typeof u.height == "number" ? u.height : u.properties && typeof u.properties.height == "number" ? u.properties.height : 100;
      })), t2 = Math.min(...m.map((u) => u.size && u.size[1] !== void 0 ? u.size[1] : typeof u.height == "number" ? u.height : u.properties && typeof u.properties.height == "number" ? u.properties.height : 100));
      let O;
      switch (i) {
        case "left":
          O = h;
          const u = [...m].sort((r, L) => r.pos[1] - L.pos[1]);
          let v = u[0].pos[1];
          u.forEach((r, L) => {
            let E = 100;
            r.size && Array.isArray(r.size) && r.size[1] ? E = r.size[1] : typeof r.height == "number" ? E = r.height : r.properties && typeof r.properties.height == "number" && (E = r.properties.height), r.pos[0] = O, r.pos[1] = v, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), v += E + 30;
          });
          break;
        case "right":
          O = f;
          const s = [...m].sort((r, L) => r.pos[1] - L.pos[1]);
          let M = s[0].pos[1];
          s.forEach((r, L) => {
            let E = 100, C2 = 150;
            r.size && Array.isArray(r.size) ? (r.size[1] && (E = r.size[1]), r.size[0] && (C2 = r.size[0])) : (typeof r.height == "number" && (E = r.height), typeof r.width == "number" && (C2 = r.width), r.properties && (typeof r.properties.height == "number" && (E = r.properties.height), typeof r.properties.width == "number" && (C2 = r.properties.width))), r.pos[0] = O - C2, r.pos[1] = M, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), M += E + 30;
          });
          break;
        case "top":
          O = c;
          const P = [...m].sort((r, L) => r.pos[0] - L.pos[0]);
          let o2 = P[0].pos[0];
          P.forEach((r, L) => {
            let E = 150;
            r.size && Array.isArray(r.size) && r.size[0] ? E = r.size[0] : typeof r.width == "number" ? E = r.width : r.properties && typeof r.properties.width == "number" && (E = r.properties.width), r.pos[1] = O, r.pos[0] = o2, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), o2 += E + 30;
          });
          break;
        case "bottom":
          O = y;
          const z2 = [...m].sort((r, L) => r.pos[0] - L.pos[0]);
          let Q = h;
          z2.forEach((r, L) => {
            let E = 150, C2 = 100;
            r.size && Array.isArray(r.size) ? (r.size[0] && (E = r.size[0]), r.size[1] && (C2 = r.size[1])) : (typeof r.width == "number" && (E = r.width), typeof r.height == "number" && (C2 = r.height), r.properties && (typeof r.properties.width == "number" && (E = r.properties.width), typeof r.properties.height == "number" && (C2 = r.properties.height)));
            const o0 = O - C2, a0 = Q;
            r.pos[1] = o0, r.pos[0] = a0, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), Q += E + 30;
          });
          break;
        case "height-center":
          const n2 = Math.min(...m.map((r) => r.pos[0])), g = Math.max(...m.map((r) => {
            let L = 150;
            return r.size && Array.isArray(r.size) && r.size[0] ? L = r.size[0] : typeof r.width == "number" ? L = r.width : r.properties && typeof r.properties.width == "number" && (L = r.properties.width), r.pos[0] + L;
          })), S = (n2 + g) / 2, G = [...m].sort((r, L) => r.pos[1] - L.pos[1]);
          let N = G[0].pos[1];
          G.forEach((r) => {
            let U = 150, E = 100;
            r.size && Array.isArray(r.size) ? (r.size[0] && (U = r.size[0]), r.size[1] && (E = r.size[1])) : (typeof r.width == "number" && (U = r.width), typeof r.height == "number" && (E = r.height), r.properties && (typeof r.properties.width == "number" && (U = r.properties.width), typeof r.properties.height == "number" && (E = r.properties.height))), r.pos[0] = S - U / 2, r.pos[1] = N, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), N += E + 30;
          });
          break;
        case "width-center":
          const W = Math.min(...m.map((r) => r.pos[1])), c2 = Math.max(...m.map((r) => {
            let L = 100;
            return r.size && Array.isArray(r.size) && r.size[1] ? L = r.size[1] : typeof r.height == "number" ? L = r.height : r.properties && typeof r.properties.height == "number" && (L = r.properties.height), r.pos[1] + L;
          })), f2 = (W + c2) / 2, m2 = [...m].sort((r, L) => r.pos[0] - L.pos[0]);
          let G2 = m2[0].pos[0];
          m2.forEach((r) => {
            let U = 150, E = 100;
            r.size && Array.isArray(r.size) ? (r.size[0] && (U = r.size[0]), r.size[1] && (E = r.size[1])) : (typeof r.width == "number" && (U = r.width), typeof r.height == "number" && (E = r.height), r.properties && (typeof r.properties.width == "number" && (U = r.properties.width), typeof r.properties.height == "number" && (E = r.properties.height))), r.pos[1] = f2 - E / 2, r.pos[0] = G2, typeof r.x == "number" && (r.x = r.pos[0]), typeof r.y == "number" && (r.y = r.pos[1]), G2 += U + 30;
          });
          break;
        case "width-max":
          m.forEach((r) => {
            r.size && (r.size[0] = w);
          });
          break;
        case "width-min":
          m.forEach((r) => {
            r.size && (r.size[0] = x);
          });
          break;
        case "height-max":
          m.forEach((r) => {
            r.size && (r.size[1] = $);
          });
          break;
        case "height-min":
          m.forEach((r) => {
            if (r.size) {
              const L = j.get(r) || r.computeSize;
              if (L) {
                const U = L.call(r);
                r.size[1] = Math.max(t2, U[1]);
              }
            }
          });
          break;
        case "size-max":
          m.forEach((r) => {
            r.size && (r.size[0] = w, r.size[1] = $);
          });
          break;
        case "size-min":
          m.forEach((r) => {
            if (r.size) {
              const L = j.get(r) || r.computeSize;
              if (L) {
                const U = L.call(r);
                r.size[0] = U[0], r.size[1] = U[1];
              }
            }
          });
          break;
        case "horizontal-flow":
          j0();
          return;
        // Don't continue to the success message at the bottom
        case "vertical-flow":
          U0();
          return;
      }
      try {
        (o = (t = window.app) == null ? void 0 : t.canvas) != null && o.setDirtyCanvas ? window.app.canvas.setDirtyCanvas(!0, !0) : (l = (a = window.app) == null ? void 0 : a.graph) != null && l.setDirtyCanvas ? window.app.graph.setDirtyCanvas(!0, !0) : (n = window.app) != null && n.canvas && window.app.canvas.draw(!0, !0);
      } catch {
      }
    } catch {
      M2("Error during alignment", "error");
    }
  }
  function Re(i) {
  }
  function j0() {
    var i, t, o, a, l;
    try {
      const n = m.filter((s) => {
        if (!s) return !1;
        const M = s.pos || s.position || typeof s.x == "number" && typeof s.y == "number", P = s.size || s.width || s.height || typeof s.width == "number" && typeof s.height == "number";
        return !!M && !!P;
      });
      if (n.length < 2) {
        M2(`Not enough valid nodes: ${n.length}/${m.length} nodes are valid`, "warning");
        return;
      }
      const h = Math.min(...n.map((s) => s.pos && (Array.isArray(s.pos) || s.pos.length !== void 0) ? s.pos[0] : s.position && (Array.isArray(s.position) || s.position.length !== void 0) ? s.position[0] : typeof s.x == "number" ? s.x : 0)), f = Math.min(...n.map((s) => s.pos && (Array.isArray(s.pos) || s.pos.length !== void 0) ? s.pos[1] : s.position && (Array.isArray(s.position) || s.position.length !== void 0) ? s.position[1] : typeof s.y == "number" ? s.y : 0)), c = h, y = f;
      n.forEach((s) => {
        s.pos || (s.position && Array.isArray(s.position) ? s.pos = s.position : typeof s.x == "number" && typeof s.y == "number" ? s.pos = [s.x, s.y] : s.pos = [0, 0]), s._calculatedSize || (s.size && Array.isArray(s.size) ? s._calculatedSize = [s.size[0], s.size[1]] : typeof s.width == "number" && typeof s.height == "number" ? s._calculatedSize = [s.width, s.height] : s._calculatedSize = [150, 100]), Array.isArray(s.pos) || (s.pos = [0, 0]);
      });
      const w = W2(n), x = Y2(n, w), $ = 30, t2 = 30, O = 30, u = 0, v = {};
      n.forEach((s) => {
        var M;
        if (s && s.id) {
          const P = ((M = x[s.id]) == null ? void 0 : M.level) ?? 0;
          v[P] || (v[P] = []), v[P].push(s);
        }
      }), Object.entries(v).forEach(([s, M]) => {
        const P = parseInt(s);
        if (M && M.length > 0) {
          M.sort((g, S) => {
            const G = g && g.id && x[g.id] ? x[g.id].order : 0, N = S && S.id && x[S.id] ? x[S.id].order : 0;
            return G - N;
          });
          const o2 = M.reduce((g, S, G) => {
            const N = S && S._calculatedSize && S._calculatedSize[1] ? S._calculatedSize[1] : 100;
            return g + N + (G < M.length - 1 ? O : 0);
          }, 0), z2 = Math.max(...M.map(
            (g) => g && g._calculatedSize && g._calculatedSize[0] ? g._calculatedSize[0] : 150
          ));
          let Q = c;
          if (P > 0)
            for (let g = 0; g < P; g++) {
              const S = v[g] || [], G = Math.max(...S.map(
                (N) => N && N._calculatedSize && N._calculatedSize[0] ? N._calculatedSize[0] : 150
              ));
              Q += G + $ + u;
            }
          let n2 = y;
          M.forEach((g, S) => {
            if (g && g.pos && g._calculatedSize) {
              const G = [g.pos[0], g.pos[1]], N = [g._calculatedSize[0], g._calculatedSize[1]];
              g.pos[0] = Q, g.pos[1] = n2, n2 += g._calculatedSize[1] + O, typeof g.x == "number" && (g.x = g.pos[0]), typeof g.y == "number" && (g.y = g.pos[1]);
            }
          });
        }
      });
      try {
        (t = (i = window.app) == null ? void 0 : i.canvas) != null && t.setDirtyCanvas ? window.app.canvas.setDirtyCanvas(!0, !0) : (a = (o = window.app) == null ? void 0 : o.graph) != null && a.setDirtyCanvas ? window.app.graph.setDirtyCanvas(!0, !0) : (l = window.app) != null && l.canvas && window.app.canvas.draw(!0, !0);
      } catch {
      }
    } catch {
      M2("Error in horizontal flow alignment", "error");
    }
  }
  function U0() {
    var i, t, o, a, l;
    try {
      const n = m.filter((s) => {
        if (!s) return !1;
        const M = s.pos || s.position || typeof s.x == "number" && typeof s.y == "number", P = s.size || s.width || s.height || typeof s.width == "number" && typeof s.height == "number";
        return !!M && !!P;
      });
      if (n.length < 2) {
        M2(`Not enough valid nodes: ${n.length}/${m.length} nodes are valid`, "warning");
        return;
      }
      const h = Math.min(...n.map((s) => s.pos && (Array.isArray(s.pos) || s.pos.length !== void 0) ? s.pos[0] : s.position && (Array.isArray(s.position) || s.position.length !== void 0) ? s.position[0] : typeof s.x == "number" ? s.x : 0)), f = Math.min(...n.map((s) => s.pos && (Array.isArray(s.pos) || s.pos.length !== void 0) ? s.pos[1] : s.position && (Array.isArray(s.position) || s.position.length !== void 0) ? s.position[1] : typeof s.y == "number" ? s.y : 0)), c = h, y = f;
      n.forEach((s) => {
        s.pos || (s.position && Array.isArray(s.position) ? s.pos = s.position : typeof s.x == "number" && typeof s.y == "number" ? s.pos = [s.x, s.y] : s.pos = [0, 0]), s._calculatedSize || (s.size && Array.isArray(s.size) ? s._calculatedSize = [s.size[0], s.size[1]] : typeof s.width == "number" && typeof s.height == "number" ? s._calculatedSize = [s.width, s.height] : s._calculatedSize = [150, 100]), Array.isArray(s.pos) || (s.pos = [0, 0]);
      });
      const w = W2(n), x = Y2(n, w), $ = 30, t2 = 30, O = 30, u = 0, v = {};
      n.forEach((s) => {
        var M;
        if (s && s.id) {
          const P = ((M = x[s.id]) == null ? void 0 : M.level) ?? 0;
          v[P] || (v[P] = []), v[P].push(s);
        }
      }), Object.entries(v).forEach(([s, M]) => {
        const P = parseInt(s);
        if (M && M.length > 0) {
          M.sort((g, S) => {
            const G = g && g.id && x[g.id] ? x[g.id].order : 0, N = S && S.id && x[S.id] ? x[S.id].order : 0;
            return G - N;
          });
          const o2 = M.reduce((g, S, G) => {
            const N = S && S._calculatedSize && S._calculatedSize[0] ? S._calculatedSize[0] : 150;
            return g + N + t2;
          }, 0), z2 = Math.max(...M.map(
            (g) => g && g._calculatedSize && g._calculatedSize[1] ? g._calculatedSize[1] : 100
          ));
          let Q = y;
          if (P > 0)
            for (let g = 0; g < P; g++) {
              const S = v[g] || [], G = Math.max(...S.map(
                (N) => N && N._calculatedSize && N._calculatedSize[1] ? N._calculatedSize[1] : 100
              ));
              Q += G + $ + u;
            }
          let n2 = c;
          M.forEach((g, S) => {
            if (g && g.pos && g._calculatedSize) {
              const G = [g.pos[0], g.pos[1]], N = [g._calculatedSize[0], g._calculatedSize[1]];
              g.pos[0] = n2, g.pos[1] = Q, n2 += g._calculatedSize[0] + t2, typeof g.x == "number" && (g.x = g.pos[0]), typeof g.y == "number" && (g.y = g.pos[1]);
            }
          });
        }
      });
      try {
        (t = (i = window.app) == null ? void 0 : i.canvas) != null && t.setDirtyCanvas ? window.app.canvas.setDirtyCanvas(!0, !0) : (a = (o = window.app) == null ? void 0 : o.graph) != null && a.setDirtyCanvas ? window.app.graph.setDirtyCanvas(!0, !0) : (l = window.app) != null && l.canvas && window.app.canvas.draw(!0, !0);
      } catch {
      }
    } catch {
      M2("Error in vertical flow alignment", "error");
    }
  }
  function M2(i, t = "info") {
    const o = document.createElement("div");
    o.textContent = i, o.style.cssText = `
            position: fixed;
            top: 60px;
            right: 10px;
            background: ${t === "success" ? "#4CAF50" : t === "warning" ? "#FF9800" : t === "error" ? "#F44336" : "#2196F3"};
            color: white;
            padding: 12px 16px;
            border-radius: 6px;
            z-index: 1001;
            font-size: 14px;
            max-width: 300px;
            word-wrap: break-word;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.3s ease;
        `, document.body.appendChild(o), setTimeout(() => {
      o.style.opacity = "1", o.style.transform = "translateX(0)";
    }, 10), setTimeout(() => {
      o.style.opacity = "0", o.style.transform = "translateX(20px)", setTimeout(() => {
        o.parentNode && o.parentNode.removeChild(o);
      }, 300);
    }, 3e3);
  }
  function x0() {
    var i;
    if (!((i = window.app) != null && i.canvas)) {
      setTimeout(x0, 100);
      return;
    }
    window.app.canvas.canvas && (window.app.canvas.canvas.addEventListener("click", () => {
      setTimeout($2, 10);
    }), window.app.canvas.canvas.addEventListener("mouseup", () => {
      setTimeout($2, 10);
    }), document.addEventListener("keydown", (t) => {
      (t.ctrlKey || t.metaKey) && setTimeout($2, 10);
    })), setInterval($2, 500);
  }
  function K0(i) {
    if (i.ctrlKey || i.metaKey) {
      if (i.shiftKey && !i.altKey && (i.key === "H" || i.key === "h")) {
        i.preventDefault(), s0();
        return;
      }
      if (i.shiftKey)
        switch (i.key) {
          case "ArrowLeft":
            i.preventDefault(), A2("left");
            break;
          case "ArrowRight":
            i.preventDefault(), A2("right");
            break;
          case "ArrowUp":
            i.preventDefault(), A2("top");
            break;
          case "ArrowDown":
            i.preventDefault(), A2("bottom");
            break;
        }
      else if (i.altKey)
        switch (i.key) {
          case "ArrowRight":
            i.preventDefault(), A2("horizontal-flow");
            break;
          case "ArrowDown":
            i.preventDefault(), A2("vertical-flow");
            break;
        }
    }
  }
  W0(), x0(), document.addEventListener("keydown", K0);
}
const e2 = {
  active: !1,
  colorOption: null,
  nodes: /* @__PURE__ */ new Map(),
  groups: /* @__PURE__ */ new Map()
};
